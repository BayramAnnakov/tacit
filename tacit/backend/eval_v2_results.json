{
  "timestamp": "2026-02-15T07:02:32.781198+00:00",
  "repos": [
    "langchain-ai/langchain",
    "denoland/deno",
    "prisma/prisma",
    "vercel/next.js",
    "facebook/react",
    "anthropics/claude-code",
    "anthropics/claude-agent-sdk-python",
    "openclaw/openclaw"
  ],
  "overall_score": 0.8159,
  "evals": [
    {
      "name": "Anti-Pattern Mining",
      "score": 0.875,
      "details": {
        "repos_with_patterns": 7,
        "total_repos": 8,
        "avg_patterns_per_repo": 4.5,
        "total_patterns": 36,
        "per_repo": {
          "langchain-ai/langchain": {
            "patterns_found": 1,
            "valid_patterns": 1,
            "sample": [
              {
                "pr_number": 35067,
                "pr_title": "fix(openai): preserve reasoning_content from OpenAI-compatible providers",
                "author": "saakshigupta2002",
                "merged": false,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "keenborder786",
                    "body": "why do we need this? If you have already have preserved the reasoning_content above for the given chunk???? This is the only difference that I can see from PR #35065, the changes are duplicates. ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "saakshigupta2002",
                    "body": "\r\n@keenborder786 The issue is that even though line 1476 calls `_convert_dict_to_message` (which now extracts `reasoning_content`), the dict it receives from `response.model_dump()` at line 1452 often doesn't actually contain `reasoning_content` - the OpenAI SDK leaves it as an attribute on the raw response object instead. Lines 1504-1526 are the fallback that grabs it directly from those attributes when the dict path misses it. DeepSeek does the same thing (lines 281-311 in their code) and you ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "keenborder786",
                    "body": "@saakshigupta2002 `often doesn't actually contain reasoning_content` can you please share the Doc link for this or wherever you have referred this from?\r\nPlus have you double-tested with both `vLLM` and `OpenAI` directly to make sure `reasoning_content` is being extracted?",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "saakshigupta2002",
                    "body": "> @saakshigupta2002 `often doesn't actually contain reasoning_content` can you please share the Doc link for this or wherever you have referred this from? Plus have you double-tested with both `vLLM` and `OpenAI` directly to make sure `reasoning_content` is being extracted?\r\n\r\n@keenborder786 Sure! The reason `model_dump()` can drop extra fields like `reasoning_content` is because of how Pydantic v2 handles them like extra fields get stored in `model_extra` but are excluded from serialization by ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 4
              }
            ]
          },
          "denoland/deno": {
            "patterns_found": 4,
            "valid_patterns": 4,
            "sample": [
              {
                "pr_number": 31867,
                "pr_title": "feat(ext/tls): add `SSLKEYLOGFILE` support for TLS key logging",
                "author": "magurotuna",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "bartlomieju",
                    "state": "COMMENTED",
                    "body": "LGTM, can you update `static ENV_VARS: &[EnvVar]` in `cli/args/flags.rs`?"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "bartlomieju",
                    "body": "This env var should be resolved on startup, otherwise someone might use `Deno.env.set(...)` before starting a TLS connection to capture the key",
                    "path": "ext/tls/keylog.rs",
                    "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright 2018-2026 the Deno authors. MIT license.\n+\n+//! TLS key logging support for debugging encrypted traffic.\n+//!\n+//! When the `SSLKEYLOGFILE` environment variable is set, TLS session keys\n+//! are written to the specified file in NSS Key Log format, which can be\n+//! used by tools like Wireshark to decrypt TLS traffic.\n+\n+use std::env;\n+use std::fs::OpenOptions;\n+use s",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "magurotuna",
                    "body": "that makes total sense! fixed it [c26dc48](https://github.com/denoland/deno/pull/31867/commits/c26dc48e3c001ee19b83241bd5e7cb336a45c1ac) and added test [fafd2c4](https://github.com/denoland/deno/pull/31867/commits/fafd2c44044954aea47087ca8f80565ba2f40fa7)",
                    "path": "ext/tls/keylog.rs",
                    "diff_hunk": "@@ -0,0 +1,32 @@\n+// Copyright 2018-2026 the Deno authors. MIT license.\n+\n+//! TLS key logging support for debugging encrypted traffic.\n+//!\n+//! When the `SSLKEYLOGFILE` environment variable is set, TLS session keys\n+//! are written to the specified file in NSS Key Log format, which can be\n+//! used by tools like Wireshark to decrypt TLS traffic.\n+\n+use std::env;\n+use std::fs::OpenOptions;\n+use s",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "bartlomieju",
                    "body": "Maybe just for extra safety, let's assert the last path is `keylog.txt` (and not `late_keylog.txt`)",
                    "path": "tests/specs/run/sslkeylogfile/__test__.jsonc",
                    "diff_hunk": "@@ -0,0 +1,28 @@\n+{\n+  \"tempDir\": true,\n+  \"tests\": {\n+    \"writes_keylog\": {\n+      \"envs\": { \"SSLKEYLOGFILE\": \"./keylog.txt\" },\n+      \"steps\": [\n+        {\n+          \"args\": \"run --allow-net --allow-env main.ts\",\n+          \"output\": \"[WILDCARD]200[WILDCARD]\"\n+        },\n+        {\n+          \"commandName\": \"cat\",\n+          \"args\": \"keylog.txt\",\n+          \"output\": \"[WILDCARD]CLIENT_HANDSHAK",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 5
              },
              {
                "pr_number": 32137,
                "pr_title": "tests(node/ext): ignore zlib kmaxlength tests",
                "author": "fraidev",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "fraidev",
                    "body": "not sure we want changes here, but this was the hacky solution for that",
                    "path": "ext/node/polyfills/01_require.js",
                    "diff_hunk": "@@ -1266,6 +1266,12 @@ function loadNativeModule(_id, request) {\n   }\n   const modExports = nativeModuleExports[request];\n   if (modExports) {\n+    // Match Node.js CJS semantics: when zlib is first require()'d, capture\n+    // buffer.kMaxLength at that point (Node.js does this via\n+    // `const { kMaxLength } = require('buffer')` at module evaluation time).\n+    if (request === \"zlib\") {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "bartlomieju",
                    "body": "I think we should mark these errors as ignored and not bother with increased complexity.",
                    "path": "tests/node_compat/config.jsonc",
                    "diff_hunk": "",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "fraidev",
                    "body": "Makes sense, I revert it and ignore them.",
                    "path": "tests/node_compat/config.jsonc",
                    "diff_hunk": "",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 4
              }
            ]
          },
          "prisma/prisma": {
            "patterns_found": 9,
            "valid_patterns": 9,
            "sample": [
              {
                "pr_number": 29158,
                "pr_title": "fix(adapter-mssql): respect curly brace escaping in connection strings",
                "author": "omair445",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 1**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>packages/adapter-mssql/src/connection-string.ts (1)</summary><blockquote>\n> \n> `34-45`: _\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n> \n> **`extractSchemaFromConnectionString` still uses naive `split(';')` \u2014 same bug the PR fixes elsewhere.**\n> \n> If any o"
                  },
                  {
                    "author": "omair445",
                    "state": "COMMENTED",
                    "body": "Thanks for the thorough review @coderabbitai! Both issues addressed:\n\n1. **`extractSchemaFromConnectionString`** \u2014 now uses `splitRespectingBraces()` and `unescapeValue()` for consistency (commit de621d1). Added 5 test cases for escaped schema values.\n\n2. **`braceDepth` negative underflow** \u2014 clamped to prevent going negative on malformed input with unmatched `}` (commit 110a080).\n\nAll 85 tests passing \u2705"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 4**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 2**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**`braceDepth` can go negative on malformed input with unmatched `}`.**\n\nIf the string contains a stray `}` before any `{`, `braceDepth` becomes negative and subsequent semicolons outside any brace pair won't be treated as delimiters, silently producing incorrect results. Clamp or throw on underflow.\n\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n     } else if (char === '}') {\n-      braceDepth--\n+      if (braceDepth > 0) {\n+        braceDepth--\n+      }",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Good catch! Applied the clamp fix \u2014 `braceDepth` is now guarded against going negative on malformed input with unmatched `}`. Pushed in commit 110a080.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445`, thank you for applying the fix! The guard against negative `braceDepth` will ensure malformed input with unmatched closing braces doesn't cause silent parsing errors. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=%40coderabbitai%20spotted%20and%20fixed%20a%20braceDepth%2",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Good coverage of the core curly-brace escaping scenarios.**\n\nConsider adding edge-case tests for:\n1. Empty braces: `password={}` \u2192 expected `\"\"` (currently broken; see `unescapeValue` comment)\n2. Braces not at value boundaries: `password=my{pass}word` \u2192 expected `my{pass}word` (no unescaping)\n3. Unmatched opening brace: `password={unclosed` \u2192 document expected behavior\n\n<!-- fingerprinting:phantom:medusa:phoenix -->\n\n<!-- This is an auto-generated reply by CodeRabbit",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Unclosed `{` silently swallows the rest of the string.**\n\nIf input contains an unmatched `{` (e.g., `password={unclosed;value`), `braceDepth` never returns to 0 and all subsequent semicolons are absorbed into one token. Parameters after the malformed value are silently lost. Consider throwing on `braceDepth !== 0` after the loop, or at minimum adding a test documenting the behavior.\n\n<!-- fingerprinting:phantom:medusa:phoenix -->\n\n<!-- This is an auto-generate",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comments that merely describe what the code does.**\n\nLines 71 and 79 restate what the code already makes clear. As per coding guidelines, avoid inline comments that describe what the code does; only write comments explaining *why*.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n     } else if (char === ';' && braceDepth === 0) {\n-      // Only split on semicolon if we're not inside curly braces\n       parts.push(current)\n       current = ''\n     } else ",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**`{}` (empty braces) is not unescaped due to `length > 2` guard.**\n\nPer MSSQL/JDBC escaping, `password={}` means an empty password. The current `trimmed.length > 2` check returns the literal `{}` instead of an empty string. Use `>= 2` to handle this edge case.\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n function unescapeValue(value: string): string {\n   const trimmed = value.trim()\n-  if (trimmed.startsWith('{') && trimmed.endsWith('}') && trimmed.leng",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Good catch! Now throwing an error when `braceDepth !== 0` after the loop \u2014 this prevents silent parameter loss from unclosed `{` braces. Added test case for malformed input. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Fixed! Changed `length > 2` to `>= 2` so `{}` correctly unescapes to an empty string. Added test case for this edge case. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant inline comments. Code is self-explanatory without them. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Great suggestions! Added test cases for all three edge cases:\n1. Empty braces `{}` \u2192 empty string\n2. Braces not at boundaries `my{pass}word` \u2192 no unescaping\n3. Unclosed brace `{unclosed` \u2192 throws error with clear message\n\nAlso added tests for unmatched closing brace (clamped behavior). All 91 tests passing \u2705. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The code is indeed cleaner and more maintainable without those descriptive comments.\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=Cleaner%20code%3A%20%40coderabbitai%20removed%20redundant%20%22what%22%20comments%20(keep%20comments%20for%20the",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The fix looks good, and I appreciate you adding test coverage for the empty braces edge case. This ensures `password={}` is correctly interpreted as an empty password per MSSQL/JDBC escaping rules.\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Perfect! The validation looks great \u2014 throwing a clear error message with the `braceDepth` value will make debugging much easier. Thank you for adding the test case as well. This prevents any silent parameter loss and makes the parser more robust. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?rela",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Excellent work! \ud83c\udf89 Thanks for implementing all the edge-case tests. The coverage is now comprehensive:\n\n\u2705 Empty braces handling  \n\u2705 Mid-value braces (no unescaping)  \n\u2705 Malformed input validation (unclosed brace throws, unmatched closing brace clamped)\n\nThe test suite now properly validates the brace-aware parsing behavior across both typical and boundary scenarios. Great attention to detail!\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet mess",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comment that describes what the code does.**\n\nThe function name `splitRespectingBraces` is self-explanatory; the inline comment restates it.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n-  // Split by semicolon while respecting curly brace escaping\n-  const parts = splitRespectingBraces(withoutProtocol)\n+  const parts = splitRespectingBraces(withoutProtocol)\n```\n</details>\n\nAs per coding guidelines: `**/*.{ts,tsx,js,jsx}`: \"Avoid adding useless code c",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -53,8 +110,9 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n export function parseConnectionString(connectionString: string): sql.config {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n \n-  // Split by semicolon to get key-value pairs\n-  const [hostPart, ...paramParts] = withoutProtocol.split(';')\n+  // Split by semicolon while r",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comment that describes what the code does.**\n\nThe `valueParts.join('=')` pattern with destructuring is idiomatic for reassembling split values; the comment restates the obvious.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n-    // Join value parts back together (in case there were = signs in the value)\n-    const value = valueParts.join('=')\n+    const value = valueParts.join('=')\n```\n</details>\n\nAs per coding guidelines: `**/*.{ts,tsx,js,jsx}`: \"Do n",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant comment. Code is self-explanatory without it. Pushed in commit 3bc0493.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -53,8 +110,9 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n export function parseConnectionString(connectionString: string): sql.config {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n \n-  // Split by semicolon to get key-value pairs\n-  const [hostPart, ...paramParts] = withoutProtocol.split(';')\n+  // Split by semicolon while r",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant comment. The destructuring + join pattern is idiomatic enough without explanation. Pushed in commit 3bc0493.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The code is cleaner without the redundant comment. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=Removed%20a%20redundant%20comment%20%E2%80%94%20destructuring%20%2B%20valueParts.join('%3D')%20is%20idiomatic%2C%20so%20the%20code%20is%20cleane",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 37,
                "review_rounds": 20
              },
              {
                "pr_number": 29038,
                "pr_title": "feat: query plan caching",
                "author": "aqrln",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 24**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.test.ts (1)</summary><blockquote>\n> \n> `49-64`: _\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n> \n> **Missing test coverage for `wrapRawValues: false` behavior.**\n> \n> The helper hardcodes `wrapRawVa"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 12**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (2)</summary><blockquote>\n> \n> <details>\n> <summary>packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.ts (2)</summary><blockquote>\n> \n> `66-79`: _\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n> \n> **Add a doc comment for the exported `SerializeParams`.**\n> \n> The exported type lacks a document"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 2**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 6**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 10**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove redundant doc comments on non-exported helpers.**\n\nThese blocks restate the function names/behavior without adding context; please drop them or replace with rationale-oriented notes.  \n\n\n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-/**\n- * Checks if a value is a placeholder.\n- * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n- */\n function isPlaceholder(\n  ",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Guard against malformed placeholder shapes.**\n\n`isPlaceholder` accepts any object with `$type: 'Param'`, but `getPlaceholderName` assumes `value.value` exists; malformed inputs can throw. Prefer defensive checks or optional chaining.  \n\n\n<details>\n<summary>\ud83d\udee1\ufe0f Suggested hardening</summary>\n\n```diff\n function getPlaceholderName(\n   value: { $type: 'Param'; value: { name: string } } | { prisma__type: 'param'; prisma__value: { name: string } },\n ): string | undefi",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n\n**Resolve placeholders recursively (nested args will mismatch).**\n\n`resolveArgPlaceholders` only handles top-level keys. Placeholders nested inside objects/arrays (common in Prisma filters) remain unresolved, causing `doKeysMatch` to miss rows and return null/P2025 incorrectly.  \n\n\n<details>\n<summary>\u2705 Suggested recursive resolution</summary>\n\n```diff\n function resolveArgPlaceholders(\n   args: Record<string, {}>,\n   placeholderValues: Record<string, unknown>,\n )",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Drop the redundant inline comment.**\n\nThe comment restates the next line; remove or replace with rationale if there\u2019s nuance.  \n\n\n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-    // Resolve any placeholders in the args using the provided placeholder values\n     const resolvedArgs = resolveArgPlaceholders(args, placeholderValues)\n```\n</details>\n\nAs per coding guidelines, \"Avoid adding useless code comments that do not add new information. Do not w",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -36,9 +94,12 @@ export function convertCompactedRows(rows: {}[], compiledBatch: CompactedBatchRe\n   const selection = new Set(compiledBatch.nestedSelection)\n \n   return compiledBatch.arguments.map((args) => {\n+    // Resolve any placeholders in the args using the provided placeholder values\n+    const resolvedArgs = resolveArgPlaceholders(args, placeholderValues)\n+",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Consider using JSON.stringify for the graph value to ensure safe string escaping.**\n\nWhile `serialized.graph` is likely a base64-encoded string (safe for direct interpolation), using `JSON.stringify` would be more defensive against edge cases where the graph might contain characters that need escaping (e.g., `\"`, `\\`, or newlines).\n\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n   private buildParamGraphConfig(): string {\n     const serialized = buildAndSeriali",
                    "path": "packages/client-generator-js/src/TSClient/TSClient.ts",
                    "diff_hunk": "@@ -47,14 +48,23 @@ export class TSClient implements Generable {\n     this.genericsInfo = new GenericArgsInfo(this.dmmf)\n   }\n \n+  private buildParamGraphConfig(): string {\n+    const serialized = buildAndSerializeParamGraph(this.options.dmmf)\n+    const stringsJson = JSON.stringify(JSON.stringify(serialized.strings))\n+    return `config.parameterizationSchema = {\n+  strings: JSON.parse(${stringsJ",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Same string escaping concern and potential code duplication.**\n\n1. Like in `TSClient.ts`, consider using `JSON.stringify(serialized.graph)` instead of direct interpolation for defensive escaping.\n\n2. This function is nearly identical to `buildParamGraphConfig` in `packages/client-generator-js/src/TSClient/TSClient.ts`. Consider extracting this into a shared utility to reduce duplication between the JS and TS client generators.\n\n\n<details>\n<summary>Proposed fix for es",
                    "path": "packages/client-generator-ts/src/TSClient/file-generators/ClassFile.ts",
                    "diff_hunk": "@@ -60,12 +63,23 @@ function clientConfig(context: GenerateContext, options: TSClientOptions) {\n     activeProvider: options.activeProvider,\n     inlineSchema,\n     runtimeDataModel: { models: {}, enums: {}, types: {} },\n+    parameterizationSchema: { strings: [], graph: '' },\n   }\n \n   return `\n const config: runtime.GetPrismaClientConfig = ${JSON.stringify(config, null, 2)}\n ${buildRuntimeDataMo",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Add a doc comment for the exported helper.**\n\nThis exported function needs a proper documentation comment.  \n\n\n<details>\n<summary>\ud83d\udcdd Suggested doc comment</summary>\n\n```diff\n+/**\n+ * Loads the Wasm QueryCompiler for the given provider for benchmark runs.\n+ */\n export function loadQueryCompiler(provider: string): Promise<QueryCompilerConstructor> {\n```\n</details>\n\nAs per coding guidelines, \u201cWrite documentation comments for exported items using proper doc comment",
                    "path": "packages/client/src/__tests__/benchmarks/query-performance/qc-loader.ts",
                    "diff_hunk": "@@ -0,0 +1,38 @@\n+import fs from 'node:fs'\n+import path from 'node:path'\n+\n+import { QueryCompilerConstructor } from '@prisma/client-common'\n+\n+import { wasmQueryCompilerLoader } from '../../../runtime/core/engines/client/WasmQueryCompilerLoader'\n+\n+export function loadQueryCompiler(provider: string): Promise<QueryCompilerConstructor> {\n+  const runtimeBase = path.join(__dirname, '..', '..', '..',",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**TODO comment should be tracked.**\n\nLine 105-106 contains a `// todo: remove this` comment. Consider creating an issue to track this cleanup or add more context about when/why it should be removed.\n\n<!-- fingerprinting:phantom:medusa:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
                    "path": "packages/client/src/runtime/core/engines/client/ClientEngine.ts",
                    "diff_hunk": "@@ -98,6 +101,10 @@ export class ClientEngine implements Engine {\n   #state: EngineState = { type: 'disconnected' }\n   #queryCompilerLoader: QueryCompilerLoader\n   #executorKind: ExecutorKind\n+  #queryPlanCache: QueryPlanCache\n+  // todo: remove this\n+  #queryPlanCacheEnabled: boolean\n+  #paramGraph: ParamGraph",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Raw query detection via `modelName === undefined` may be fragile.**\n\nConsider using the `isRawQuery` helper (defined at line 756) for consistency with the single-query path.\n\n\n<details>\n<summary>\u267b\ufe0f Use isRawQuery helper for consistency</summary>\n\n```diff\n-    const hasRawQueries = firstModelName === undefined\n+    const hasRawQueries = queries.some(isRawQuery)\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMP",
                    "path": "packages/client/src/runtime/core/engines/client/ClientEngine.ts",
                    "diff_hunk": "@@ -493,13 +529,41 @@ export class ClientEngine implements Engine {\n     const firstAction = queries[0].action\n     const firstModelName = queries[0].modelName\n \n-    const request = getBatchRequestPayload(queries, transaction)\n+    const batchPayload = getBatchRequestPayload(queries, transaction)\n+    const request = JSON.stringify(batchPayload)\n \n     const { executor, queryCompiler } = await th",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Mutable `export let` with async initialization is error-prone.**\n\nThe `export let paramGraph` pattern combined with eager async initialization creates a race condition window. If a test imports this module and synchronously accesses `paramGraph` before `initPromise` resolves, it will be `undefined`.\n\nConsider making the access safer:\n\n\n<details>\n<summary>\u267b\ufe0f Safer pattern using getter or required await</summary>\n\n**Option 1: Getter that throws if not initialized**\n```",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize-tests/test-fixtures.ts",
                    "diff_hunk": "@@ -0,0 +1,117 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import { getDMMF } from '@prisma/client-generator-js'\n+import { ParamGraph } from '@prisma/param-graph'\n+import { buildAndSerializeParamGraph } from '@prisma/param-graph-builder'\n+\n+/**\n+ * Prisma schema that simulates a User model with common fields and filters,\n+ * along with related Post and Profile models.\n+ */\n+",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Eager initialization has unhandled rejection risk.**\n\nThe `initializeFixtures()` promise is created at module load, but if it rejects, the error may be swallowed unless a test explicitly awaits `initPromise`. Consider adding error handling:\n\n\n<details>\n<summary>\u267b\ufe0f Add error handling for eager init</summary>\n\n```diff\n const initPromise = initializeFixtures().then((pg) => {\n   paramGraph = pg\n+}).catch((err) => {\n+  console.error('Failed to initialize test fixtures:', ",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize-tests/test-fixtures.ts",
                    "diff_hunk": "@@ -0,0 +1,117 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import { getDMMF } from '@prisma/client-generator-js'\n+import { ParamGraph } from '@prisma/param-graph'\n+import { buildAndSerializeParamGraph } from '@prisma/param-graph-builder'\n+\n+/**\n+ * Prisma schema that simulates a User model with common fields and filters,\n+ * along with related Post and Profile models.\n+ */\n+",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Consider documenting the custom action type cast.**\n\nThe `as any` cast for `'findByDate'` action works for testing, but a brief comment explaining this is a test-only synthetic action would improve clarity.\n\n```diff\n       const query: JsonQuery = {\n         modelName: 'User',\n-        action: 'findByDate' as any,\n+        action: 'findByDate' as any, // Synthetic action for testing DateTime parameterization\n         query: {\n```\n\n<!-- suggestion_start -->\n\n<details>",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize.test.ts",
                    "diff_hunk": "@@ -0,0 +1,687 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import type { JsonQuery } from '@prisma/json-protocol'\n+import type { ParamGraphData } from '@prisma/param-graph'\n+import { EdgeFlag, ParamGraph, ScalarMask } from '@prisma/param-graph'\n+\n+import { parameterizeBatch, parameterizeQuery } from './parameterize'\n+\n+function createEnumLookup(runtimeDataModel: RuntimeDataM",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Rename test file to kebab-case.**  \n`QueryPlanCache.test.ts` should be kebab-case (e.g., `query-plan-cache.test.ts`).  \n  \nAs per coding guidelines: Use kebab-case for new file names (e.g., `query-utils.ts`, `filter-operators.test.ts`).\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
                    "path": "packages/client/src/runtime/core/engines/client/QueryPlanCache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove inline \u201cwhat it does\u201d comments.**  \nThe two inline comments restate the code.  \n  \n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-      // Access key1 to make it recently used\n       cache.getSingle('key1')\n\n-      // Add key3, should evict key2 (oldest)\n       cache.setSingle('key3', plan3)\n```\n</details>  \nAs per coding guidelines: Avoid adding useless code comments that do not add new information. Do not write inline comments that describ",
                    "path": "packages/client/src/runtime/core/engines/client/query-plan-cache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'\n+\n+describe('QueryPlanCache', () => {\n+  describe('single cache', () => {\n+    it('stores and retrieves entries', () => {\n+      const cache = new QueryPlanCache()\n+      const plan = { type: 'value' as const, args: null }\n+\n+      cache.setSingle('key1', plan)\n+      const retrieved = cache.getSingle('key1')\n+\n+      expect(retr",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove inline \u201cwhat it does\u201d comments.**  \nThe two inline comments restate the code.  \n  \n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-      // Access key1 to make it recently used\n       cache.getBatch('key1')\n\n-      // Add key3, should evict key2 (oldest)\n       cache.setBatch('key3', makeResponse(3))\n```\n</details>  \nAs per coding guidelines: Avoid adding useless code comments that do not add new information. Do not write inline comments that",
                    "path": "packages/client/src/runtime/core/engines/client/query-plan-cache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'\n+\n+describe('QueryPlanCache', () => {\n+  describe('single cache', () => {\n+    it('stores and retrieves entries', () => {\n+      const cache = new QueryPlanCache()\n+      const plan = { type: 'value' as const, args: null }\n+\n+      cache.setSingle('key1', plan)\n+      const retrieved = cache.getSingle('key1')\n+\n+      expect(retr",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**TODO: Performance optimization for bytes conversion.**\n\nThe current implementation converts the ArrayBuffer view to a Buffer before base64 encoding.\n\n\nWould you like me to open an issue to track this performance optimization? Potential approaches include using `btoa` with a typed array view or a direct base64 encoding library that avoids the intermediate Buffer allocation.\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by Cod",
                    "path": "packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.ts",
                    "diff_hunk": "@@ -309,6 +312,7 @@ function serializeArgumentsValue(\n \n   if (ArrayBuffer.isView(jsValue)) {\n     const { buffer, byteOffset, byteLength } = jsValue\n+    // TODO(perf): get rid of this conversion\n     return { $type: 'Bytes', value: Buffer.from(buffer, byteOffset, byteLength).toString('base64') }\n   }",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n\n**Add teardown for per-test Prisma clients.**\n\nLine 62-64 now creates a new Prisma client per test but never disconnects prior instances, which can leak connections and keep open handles across the suite. Add an `afterEach` to disconnect (or reuse a single client).\n\n\n<details>\n<summary>\ud83e\uddf9 Proposed fix</summary>\n\n```diff\n beforeEach(() => {\n   prisma = newPrismaClient()\n })\n+\n+afterEach(async () => {\n+  await prisma.$disconnect()\n+})\n```\n</details>\n\n<!-- suggestio",
                    "path": "packages/client/tests/functional/tracing/tests.ts",
                    "diff_hunk": "@@ -59,6 +59,10 @@ afterAll(() => {\n   context.disable()\n })\n \n+beforeEach(() => {\n+  prisma = newPrismaClient()\n+})",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Add documentation comments for exported types.**\n\nThe new `Placeholder` and `PlaceholderType` types are public exports but lack documentation comments. As per coding guidelines, exported items should have proper doc comments.\n\n<details>\n<summary>\ud83d\udcdd Suggested documentation</summary>\n\n```diff\n+/**\n+ * Represents a placeholder in a parameterized query.\n+ * Combines a unique name with type information for runtime value binding.\n+ */\n export type Placeholder = {\n   name: s",
                    "path": "packages/json-protocol/src/index.ts",
                    "diff_hunk": "@@ -84,10 +85,29 @@ export type JsonInputTaggedValue =\n   | JsonTaggedValue\n   | EnumTaggedValue\n   | RawTaggedValue\n+  | PlaceholderTaggedValue\n \n export type JsonOutputTaggedValue =\n   | DateTaggedValue\n   | DecimalTaggedValue\n   | BytesTaggedValue\n   | BigIntTaggedValue\n   | JsonTaggedValue\n+\n+export type Placeholder = {\n+  name: string\n+} & PlaceholderType\n+\n+export type PlaceholderType =\n+  |",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n\ud83c\udfc1 Script executed:\n\n```shell\n#!/bin/bash\n\n# Check for test files in param-graph-builder\necho \"=== Test files in param-graph-builder ===\"\nfind packages/param-graph-builder -type f \\( -name \"*.test.ts\" -o -name \"*.test.js\" -o -name \"*.spec.ts\" -o -name \"*.spec.js\" \\) 2>/dev/null || echo \"No test files found\"\n\necho \"\"\necho \"=== param-graph-builder package.json scripts ===\"\ncat packages/param-graph-builder/package.json | grep ",
                    "path": "packages/param-graph-builder/package.json",
                    "diff_hunk": "@@ -0,0 +1,39 @@\n+{\n+  \"name\": \"@prisma/param-graph-builder\",\n+  \"version\": \"0.0.0\",\n+  \"description\": \"This package is intended for Prisma's internal use\",\n+  \"main\": \"dist/index.js\",\n+  \"module\": \"dist/index.mjs\",\n+  \"types\": \"dist/index.d.ts\",\n+  \"exports\": {\n+    \".\": {\n+      \"require\": {\n+        \"types\": \"./dist/index.d.ts\",\n+        \"default\": \"./dist/index.js\"\n+      },\n+      \"import\": {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n\ud83c\udfc1 Script executed:\n\n```shell\ncat -n packages/param-graph-builder/src/dmmf-traverser.ts | sed -n '380,440p'\n```\n\nRepository: prisma/prisma\n\nLength of output: 2179\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\nrg -n 'buildInputTypeNode|#pendingInputNodes' packages/param-graph-builder/src/dmmf-traverser.ts -B 2 -A 10\n```\n\nRepository: prisma/prisma\n\nLength of output: 2617\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\nrg -n '#drainPendingWork",
                    "path": "packages/param-graph-builder/src/dmmf-traverser.ts",
                    "diff_hunk": "@@ -0,0 +1,453 @@\n+/**\n+ * DMMFTraverser: DMMF traversal logic for building ParamGraph.\n+ *\n+ * This class contains the traversal algorithms that walk DMMF structures\n+ * and build the param graph. It uses ParamGraphBuilder for allocation\n+ * and caching.\n+ */\n+\n+import type * as DMMF from '@prisma/dmmf'\n+import { ModelAction } from '@prisma/dmmf'\n+import type { InputEdgeData, OutputEdgeData } fro",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 50,
                "review_rounds": 20
              }
            ]
          },
          "vercel/next.js": {
            "patterns_found": 9,
            "valid_patterns": 9,
            "sample": [
              {
                "pr_number": 89166,
                "pr_title": "fix(agents-md): use `require.resolve()` to get the installed `next` version",
                "author": "devjiwonchoi",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "vercel[bot]",
                    "body": "Missing return statement in `getNextjsVersion` when `pkg.version` is falsy causes function to return `undefined` instead of `NextjsVersionResult`\n<!-- VADE-CATEGORY: logic -->\n<!-- VADE-GITHUB-SUGGESTION-ID:e4bc8d1246d6455bd9265cf7ecb2a3ab723436e9355e36cff924b442ee983ef0 -->\n\n<!-- VADE-RECOMMENDATION: FIX -->\n<a href=\"https://vercel.com/vercel/~/agent/tasks/64e5e113-ab17-443c-85a2-67a21b018902#suggestion-e4bc8d1246d6455bd9265cf7ecb2a3ab723436e9355e36cff924b442ee983ef0\" rel=\"noreferrer\">\n  <pictu",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "gaojude",
                    "body": "this is smart. only part that's missing is the test.",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }\n-\n   try {\n-    const packageJson = JSON.parse(fs.readFileS",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "gaojude",
                    "body": "also need to update `findNextjsInWorkspace` to this logic",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }\n-\n   try {\n-    const packageJson = JSON.parse(fs.readFileS",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "The original bug was that the function could return `undefined` (implicitly) if `pkg.version` was falsy but the try block didn't throw. The current code now always returns `{ version: pkg.version }` from the try block - this is an object, not `undefined`. Even if `pkg.version` is undefined, the function returns an object `{ version: undefined }`, not `undefined` itself. The calling code in `pullDocs` checks `if (!versionResult.version)` which handles both `null` and `undefined` correctly, preven",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 5
              },
              {
                "pr_number": 83108,
                "pr_title": "[fragment-scroll] Ensure hoisted elements don't break scroll-to-top on page navigations",
                "author": "eps1lon",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "vercel[bot]",
                    "body": "```suggestion\n      // Set focus on the element - only call focus() if domNode is an HTMLElement\n      if ('focus' in domNode && typeof domNode.focus === 'function') {\n        domNode.focus()\n      }\n```\n\n\n<!-- VADE-CATEGORY: type-safety -->\nThe code calls `focus()` on `domNode` which can be a `FragmentInstance`, but `FragmentInstance` doesn't have a `focus()` method, causing a potential runtime error.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nLi",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: type-safety -->\nThe new scroll handler attempts to call `experimental_scrollIntoView` method on `domNode`, but this method doesn't exist on either `FragmentInstance` or `HTMLElement` types, which will cause a runtime error.\n\n<details>\n<summary>View Details</summary>\n\n<br/>\n<details>\n<summary>\ud83d\udcdd Patch Details</summary>\n\n```diff\ndiff --git a/packages/next/src/client/components/layout-router.tsx b/packages/next/src/client/components/layout-router.tsx\nindex dca35508fc..4e5a22ad05",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "The cDM + cDU logic is quite sketchy so I'm keeping this as a class Component.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: configuration -->\nThe test uses the wrong environment variable name `__NEXT_EXPERIMENTAL_APP_NEW_SCROLL_HANDLER` instead of `__NEXT_APP_NEW_SCROLL_HANDLER` that's defined in the build configuration.\n\n<details>\n<summary>View Details</summary>\n\n<br/>\n<details>\n<summary>\ud83d\udcdd Patch Details</summary>\n\n```diff\ndiff --git a/test/development/acceptance-app/hydration-error.test.ts b/test/development/acceptance-app/hydration-error.test.ts\nindex 7a8ab95d42..24a403a108 100644\n--- a/test/de",
                    "path": "test/development/acceptance-app/hydration-error.test.ts",
                    "diff_hunk": "@@ -5,6 +5,14 @@ import path from 'path'\n import { outdent } from 'outdent'\n import { getToastErrorCount, retry } from 'next-test-utils'\n \n+const enableNewScrollHandler = Boolean(\n+  process.env.__NEXT_EXPERIMENTAL_APP_NEW_SCROLL_HANDLER",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: performance -->\nThe useLayoutEffect with `undefined` dependencies runs on every render, which could cause performance issues and unexpected behavior.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nThe `useLayoutEffect` in `InnerScrollAndFocusHandlerNew` uses `undefined` as its dependency array, which means it runs after every render instead of only when necessary. This is different from the class component approach where `componen",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -303,6 +322,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "That's matching the old behavior. We ensure it's only run once by flipping `.apply`",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -303,6 +322,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "It does in React DOM which is what we're targeting here.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "It does in this branch",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "```suggestion\n  it('should scroll to top even if React hoists children', async () => {\n```\n\n\n<!-- VADE-CATEGORY: unfinished-work -->\nThe test uses `fit` instead of `it`, which means only this single test will run and all other tests in the suite will be skipped.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nThe test case `'should scroll to top even if React hoists children'` is using `fit()` instead of `it()` on line 283. In Jest/testing frameworks, ",
                    "path": "test/e2e/app-dir/router-autoscroll/router-autoscroll.test.ts",
                    "diff_hunk": "@@ -275,4 +279,27 @@ describe('router autoscrolling on navigation', () => {\n       })\n     })\n   })\n+\n+  fit('should scroll to top even if React hoists children', async () => {",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "This issue has been resolved.\n\n<!-- VADE-THREAD: RESOLVED -->",
                    "path": "test/e2e/app-dir/router-autoscroll/router-autoscroll.test.ts",
                    "diff_hunk": "@@ -275,4 +279,27 @@ describe('router autoscrolling on navigation', () => {\n       })\n     })\n   })\n+\n+  fit('should scroll to top even if React hoists children', async () => {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "Confirm this only had an effect if the segment was focusable (scrollable, interactive etc). I think that was pretty rare so we should just drop it.\n\nThe deciding factor is assistive tech. If screen readers move an internal pointer when you focus something unfocusable, we need to rethink the React behavior.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -246,6 +265,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "Will change behavior in a follow-up to address various a11y issues this causes.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -246,6 +265,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 12,
                "review_rounds": 11
              }
            ]
          },
          "facebook/react": {
            "patterns_found": 3,
            "valid_patterns": 3,
            "sample": [
              {
                "pr_number": 35720,
                "pr_title": "[eslint-plugin-react-hooks] Add ESLint v10 support",
                "author": "azat-io",
                "merged": true,
                "has_formal_rejection": true,
                "review_bodies": [
                  {
                    "author": "josephsavona",
                    "state": "APPROVED",
                    "body": "Awesome, thanks!"
                  },
                  {
                    "author": "josephsavona",
                    "state": "CHANGES_REQUESTED",
                    "body": "You'll also need to update https://github.com/facebook/react/blob/main/.github/workflows/runtime_eslint_plugin_e2e.yml#L27-L31 to make sure the new fixture runs in CI"
                  }
                ],
                "inline_review_comments": [],
                "total_review_comments": 0,
                "review_rounds": 2
              },
              {
                "pr_number": 30522,
                "pr_title": "[Fiber] Make DevTools Config use Static Injection",
                "author": "sebmarkbage",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "hoxyq",
                    "body": "This will require some changes on React Native side before the sync",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "sebmarkbage",
                    "body": "Why is that? I tried to keep it the same as far as what React Native observes.",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "hoxyq",
                    "body": "You are right, I thought we are calling `<renderer>.rendererConfig.getInspectorDataForViewAtPoint` on RN side, but we [actually use it from RDT global hook](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Inspector/getInspectorDataForViewAtPoint.js#L70), so should be perfectly fine",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 3
              }
            ]
          },
          "anthropics/claude-code": {
            "patterns_found": 0,
            "valid_patterns": 0,
            "sample": []
          },
          "anthropics/claude-agent-sdk-python": {
            "patterns_found": 1,
            "valid_patterns": 1,
            "sample": [
              {
                "pr_number": 91,
                "pr_title": "feat: enable custom transports",
                "author": "rushilpatel0",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "dicksontsai",
                    "state": "COMMENTED",
                    "body": "I think this change is reasonable. Left some comments that should be addressed. Thanks!"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "dicksontsai",
                    "body": "Please add back the newlines and the end of these files. These files should not appear in the diff.",
                    "path": "tests/test_integration.py",
                    "diff_hunk": "",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "dicksontsai",
                    "body": "Is this import actually needed?",
                    "path": "src/claude_code_sdk/_internal/transport/__init__.py",
                    "diff_hunk": "@@ -4,6 +4,8 @@\n from collections.abc import AsyncIterator\n from typing import Any\n \n+from claude_code_sdk.types import ClaudeCodeOptions",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "dicksontsai",
                    "body": "Now that we're exposing something internal, can you expand the class docstring with the message below?\r\n\r\n```\r\n    \"\"\"Abstract transport for Claude communication.\r\n\r\n    WARNING: This internal API is exposed for custom transport implementations\r\n    (e.g., remote Claude Code connections). The Claude Code team may change or\r\n    or remove this abstract class in any future release. Custom implementations\r\n    must be updated to match interface changes.\r\n    \"\"\"\r\n```",
                    "path": "src/claude_code_sdk/_internal/transport/__init__.py",
                    "diff_hunk": "@@ -4,6 +4,8 @@\n from collections.abc import AsyncIterator\n from typing import Any\n \n+from claude_code_sdk.types import ClaudeCodeOptions\n+\n \n class Transport(ABC):\n     \"\"\"Abstract transport for Claude communication.\"\"\"",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 2
              }
            ]
          },
          "openclaw/openclaw": {
            "patterns_found": 9,
            "valid_patterns": 9,
            "sample": [
              {
                "pr_number": 10400,
                "pr_title": "Discord: add gateway proxy support",
                "author": "winter-loo",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "greptile-apps[bot]",
                    "state": "COMMENTED",
                    "body": "<sub>1 file reviewed, 2 comments</sub>\n\n<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Missing direct `ws` dependency**\n\n`provider.ts` now does `import WebSocket from \"ws\"`, but `ws` isn\u2019t a direct dependency of this repo (it\u2019s only an *optional* dependency of `@buape/carbon`). In installs/builds where Carbon\u2019s optional deps aren\u2019t present, starting Discord will crash with `ERR_MODULE_NOT_FOUND: Cannot find package 'ws'`. Either avoid importing `ws` directly here or ensure `ws` is a guaranteed runtime dependency.\n\n<details><summary>Prompt To Fix With AI</summary>\n\n`````markdown\n",
                    "path": "src/discord/monitor/provider.ts",
                    "diff_hunk": "@@ -1,9 +1,12 @@\n import { Client } from \"@buape/carbon\";\n import { GatewayIntents, GatewayPlugin } from \"@buape/carbon/gateway\";\n import { Routes } from \"discord-api-types/v10\";\n+import { HttpsProxyAgent } from \"https-proxy-agent\";\n import { inspect } from \"node:util\";\n+import WebSocket from \"ws\";",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Proxy scheme mismatch**\n\nConfig/help text allows `channels.discord.proxy` like `http://127.0.0.1:5780`, but the implementation always uses `new HttpsProxyAgent(proxy)`. That agent is intended for HTTPS proxies; a valid `http://\u2026` proxy URL can pass config and then fail at connection time (or behave incorrectly). The agent type should match the proxy URL\u2019s scheme (HTTP vs HTTPS) if both are supported.\n\n<details><summary>Prompt To Fix With AI</summary>\n\n`````markdown\nThis is a comment left durin",
                    "path": "src/discord/monitor/provider.ts",
                    "diff_hunk": "@@ -52,6 +55,51 @@ export type MonitorDiscordOpts = {\n   replyToMode?: ReplyToMode;\n };\n \n+function createDiscordGatewayPlugin(params: {\n+  discordConfig: DiscordAccountConfig;\n+  runtime: RuntimeEnv;\n+}): GatewayPlugin {\n+  const intents = resolveDiscordGatewayIntents(params.discordConfig?.intents);\n+  const proxy = params.discordConfig?.proxy?.trim();\n+  const options = {\n+    reconnect: { maxAt",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "winter-loo",
                    "body": "`ws` is a dependency already.",
                    "path": "src/discord/monitor/provider.ts",
                    "diff_hunk": "@@ -1,9 +1,12 @@\n import { Client } from \"@buape/carbon\";\n import { GatewayIntents, GatewayPlugin } from \"@buape/carbon/gateway\";\n import { Routes } from \"discord-api-types/v10\";\n+import { HttpsProxyAgent } from \"https-proxy-agent\";\n import { inspect } from \"node:util\";\n+import WebSocket from \"ws\";",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "winter-loo",
                    "body": "Just a name issue. It actually works with 'http' and 'socks5h' in my test.",
                    "path": "src/discord/monitor/provider.ts",
                    "diff_hunk": "@@ -52,6 +55,51 @@ export type MonitorDiscordOpts = {\n   replyToMode?: ReplyToMode;\n };\n \n+function createDiscordGatewayPlugin(params: {\n+  discordConfig: DiscordAccountConfig;\n+  runtime: RuntimeEnv;\n+}): GatewayPlugin {\n+  const intents = resolveDiscordGatewayIntents(params.discordConfig?.intents);\n+  const proxy = params.discordConfig?.proxy?.trim();\n+  const options = {\n+    reconnect: { maxAt",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 3
              },
              {
                "pr_number": 11252,
                "pr_title": "fix: fallback to install.sh script when update fails",
                "author": "joeykrug",
                "merged": false,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "greptile-apps[bot]",
                    "state": "COMMENTED",
                    "body": "<sub>2 files reviewed, 4 comments</sub>\n\n<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Fallback can loop/crash**\n\nIn the fallback path you call `runInstallScriptUpdate(...)` without handling exceptions. If the install-script updater throws (e.g., `bash`/`curl` missing), this handler will throw out of the request instead of returning an `UpdateRunResult`. Consider wrapping this call in its own try/catch and returning an error result (or reusing the existing outer fallback path).\n\n<details><summary>Prompt To Fix With AI</summary>\n\n`````markdown\nThis is a comment left during a code",
                    "path": "src/gateway/server-methods/update.ts",
                    "diff_hunk": "@@ -47,31 +48,66 @@ export const updateHandlers: GatewayRequestHandlers = {\n       typeof timeoutMsRaw === \"number\" && Number.isFinite(timeoutMsRaw)\n         ? Math.max(1000, Math.floor(timeoutMsRaw))\n         : undefined;\n+    // New parameter: use install script method\n+    const useInstallScript =\n+      (params as { useInstallScript?: unknown }).useInstallScript === true;\n \n-    let result: Aw",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Wrong error reported**\n\nIn the nested fallback, the inner `catch { ... }` discards the actual error from `runInstallScriptUpdate` and then reports `String(err)` from the *outer* catch. If the complex update throws and the install-script fallback also throws, the user will see the wrong failure reason. Bind the inner error (e.g., `catch (fallbackErr)`) and use that for `reason`.\n\n<details><summary>Prompt To Fix With AI</summary>\n\n`````markdown\nThis is a comment left during a code review.\nPath: ",
                    "path": "src/gateway/server-methods/update.ts",
                    "diff_hunk": "@@ -47,31 +48,66 @@ export const updateHandlers: GatewayRequestHandlers = {\n       typeof timeoutMsRaw === \"number\" && Number.isFinite(timeoutMsRaw)\n         ? Math.max(1000, Math.floor(timeoutMsRaw))\n         : undefined;\n+    // New parameter: use install script method\n+    const useInstallScript =\n+      (params as { useInstallScript?: unknown }).useInstallScript === true;\n \n-    let result: Aw",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Windows/container runtime break**\n\n`runInstallScriptUpdate` always executes `bash -c ...` and assumes both `bash` and `curl` exist. On Windows (no bash by default) and minimal Linux images (e.g., Alpine without bash/curl), `runCommandWithTimeout` will throw, which then breaks the update handler unless caught. If this fallback is meant to improve reliability, it needs a preflight check (or a clearer error result) for missing executables/platform support.\n\n<details><summary>Prompt To Fix With AI",
                    "path": "src/infra/update-install-script.ts",
                    "diff_hunk": "@@ -0,0 +1,133 @@\n+/**\n+ * Fallback update method using the official install script.\n+ * This is more reliable than the complex git/npm update logic.\n+ */\n+\n+import os from \"node:os\";\n+import path from \"node:path\";\n+import fs from \"node:fs/promises\";\n+import { runCommandWithTimeout, type CommandOptions } from \"../process/exec.js\";\n+import { trimLogTail } from \"./restart-sentinel.js\";\n+import type ",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Channel type cast bypasses validation**\n\n`channel: configChannel as \"stable\" | \"beta\" | \"dev\" | undefined` bypasses the runtime validation that `normalizeUpdateChannel` provides (and also ignores its `null` possibility). If `normalizeUpdateChannel` ever returns an unexpected value (or its return type changes), this will flow into the install script call without checks. Prefer passing `configChannel ?? undefined` with the correct type, or explicitly narrowing instead of asserting.\n\n<details><su",
                    "path": "src/gateway/server-methods/update.ts",
                    "diff_hunk": "@@ -47,31 +48,66 @@ export const updateHandlers: GatewayRequestHandlers = {\n       typeof timeoutMsRaw === \"number\" && Number.isFinite(timeoutMsRaw)\n         ? Math.max(1000, Math.floor(timeoutMsRaw))\n         : undefined;\n+    // New parameter: use install script method\n+    const useInstallScript =\n+      (params as { useInstallScript?: unknown }).useInstallScript === true;\n \n-    let result: Aw",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 1
              }
            ]
          }
        }
      },
      "error": null,
      "duration_seconds": 148.71
    },
    {
      "name": "Provenance Coverage",
      "score": 0.9909,
      "details": {
        "total_rules": 991,
        "rules_with_provenance_url": 973,
        "rules_with_provenance_summary": 991,
        "valid_github_urls": 973,
        "url_coverage_pct": 98.2,
        "summary_coverage_pct": 100.0
      },
      "error": null,
      "duration_seconds": 0.01
    },
    {
      "name": "Path Scoping Coverage",
      "score": 0.5126,
      "details": {
        "total_rules": 991,
        "rules_with_paths": 508,
        "rules_with_valid_globs": 507,
        "path_coverage_pct": 51.3
      },
      "error": null,
      "duration_seconds": 0.01
    },
    {
      "name": "Modular Rules Generation",
      "score": 0.996,
      "details": {
        "total_files_generated": 174,
        "valid_files": 173,
        "repos_with_donot": 8,
        "file_validity_pct": 99.4,
        "donot_coverage_pct": 100.0,
        "per_repo": {
          "langchain-ai/langchain": {
            "total_files": 20,
            "valid_files": 20,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/**/architecture.md",
              ".claude/rules/**/domain.md",
              ".claude/rules/**/style.md",
              ".claude/rules/**/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/code-style.md",
              ".claude/rules/domain.md",
              ".claude/rules/libs/architecture.md"
            ]
          },
          "denoland/deno": {
            "total_files": 34,
            "valid_files": 34,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/**/architecture.md",
              ".claude/rules/**/performance.md",
              ".claude/rules/**/security.md",
              ".claude/rules/**/style.md",
              ".claude/rules/**/workflow.md",
              ".claude/rules/.github/style.md",
              ".claude/rules/.github/workflow.md",
              ".claude/rules/architecture.md"
            ]
          },
          "prisma/prisma": {
            "total_files": 19,
            "valid_files": 19,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/security.md",
              ".claude/rules/ci.md",
              ".claude/rules/performance.md",
              ".claude/rules/client/functional-tests.md"
            ]
          },
          "vercel/next.js": {
            "total_files": 10,
            "valid_files": 9,
            "has_donot": true,
            "file_paths": [
              "CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/testing.md",
              ".claude/rules/code-style.md",
              ".claude/rules/architecture.md",
              ".claude/rules/workflow.md",
              ".claude/rules/ci.md",
              ".claude/rules/rust/conventions.md",
              ".claude/rules/next-core/architecture.md",
              ".claude/rules/test/conventions.md"
            ]
          },
          "facebook/react": {
            "total_files": 25,
            "valid_files": 25,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/code-style-packages.md",
              ".claude/rules/code-style-scripts.md",
              ".claude/rules/code-style-jsx.md",
              ".claude/rules/code-style-typescript.md",
              ".claude/rules/testing.md",
              ".claude/rules/testing-config.md",
              ".claude/rules/workflow.md",
              ".claude/rules/workflow-flow.md"
            ]
          },
          "anthropics/claude-code": {
            "total_files": 25,
            "valid_files": 25,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/**/design.md",
              ".claude/rules/**/domain.md",
              ".claude/rules/**/product.md",
              ".claude/rules/.claude/architecture.md",
              ".claude/rules/.claude/domain.md",
              ".claude/rules/.devcontainer/architecture.md",
              ".claude/rules/.devcontainer/security.md",
              ".claude/rules/.devcontainer/workflow.md"
            ]
          },
          "anthropics/claude-agent-sdk-python": {
            "total_files": 13,
            "valid_files": 13,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/do-not.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/domain.md",
              ".claude/rules/product.md",
              ".claude/rules/ci.md",
              ".claude/rules/sdk/types-and-api.md"
            ]
          },
          "openclaw/openclaw": {
            "total_files": 28,
            "valid_files": 28,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/**/architecture.md",
              ".claude/rules/**/style.md",
              ".claude/rules/**/testing.md",
              ".claude/rules/**/workflow.md",
              ".claude/rules/.github/workflow.md",
              ".claude/rules/agent/domain.md",
              ".claude/rules/agents/architecture.md",
              ".claude/rules/agents/testing.md"
            ]
          }
        }
      },
      "error": null,
      "duration_seconds": 2557.21
    },
    {
      "name": "Incremental Extraction",
      "score": 1.0,
      "details": {
        "successful_extractions": 8,
        "total_attempts": 8,
        "per_repo": {
          "langchain-ai/langchain": {
            "pr_number": 35067,
            "new_rules": 0,
            "new_proposals": 4,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "denoland/deno": {
            "pr_number": 32138,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "prisma/prisma": {
            "pr_number": 29089,
            "new_rules": 2,
            "new_proposals": 2,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "vercel/next.js": {
            "pr_number": 89166,
            "new_rules": 0,
            "new_proposals": 2,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "facebook/react": {
            "pr_number": 35720,
            "new_rules": 0,
            "new_proposals": 1,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "anthropics/claude-code": {
            "pr_number": 18198,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "anthropics/claude-agent-sdk-python": {
            "pr_number": 485,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "openclaw/openclaw": {
            "pr_number": 11853,
            "new_rules": 2,
            "new_proposals": 3,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          }
        }
      },
      "error": null,
      "duration_seconds": 517.55
    },
    {
      "name": "Outcome Metrics Collection",
      "score": 1.0,
      "details": {
        "repos_with_valid_metrics": 8,
        "total_repos": 8,
        "per_repo": {
          "langchain-ai/langchain": {
            "metrics": {
              "total_prs": 20,
              "avg_review_rounds": 0.65,
              "ci_failure_rate": 0.137,
              "avg_time_to_merge_hours": 28.5
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "denoland/deno": {
            "metrics": {
              "total_prs": 42,
              "avg_review_rounds": 1.93,
              "ci_failure_rate": 0.009,
              "avg_time_to_merge_hours": 45.3
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "prisma/prisma": {
            "metrics": {
              "total_prs": 23,
              "avg_review_rounds": 2.17,
              "ci_failure_rate": 0.032,
              "avg_time_to_merge_hours": 19.2
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "vercel/next.js": {
            "metrics": {
              "total_prs": 8,
              "avg_review_rounds": 1.5,
              "ci_failure_rate": 0.075,
              "avg_time_to_merge_hours": 2.9
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "facebook/react": {
            "metrics": {
              "total_prs": 27,
              "avg_review_rounds": 1.59,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 13.3
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "anthropics/claude-code": {
            "metrics": {
              "total_prs": 5,
              "avg_review_rounds": 1.2,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 2.4
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "anthropics/claude-agent-sdk-python": {
            "metrics": {
              "total_prs": 4,
              "avg_review_rounds": 1.0,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 6.6
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "openclaw/openclaw": {
            "metrics": {
              "total_prs": 7,
              "avg_review_rounds": 1.29,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 56.2
            },
            "fields_present": 4,
            "values_reasonable": true
          }
        }
      },
      "error": null,
      "duration_seconds": 357.77
    },
    {
      "name": "Domain Knowledge Extraction",
      "score": 0.7806,
      "details": {
        "repos_with_domain_rules": 6,
        "total_domain_rules": 191,
        "total_repos": 8,
        "sub_evals": {
          "7a_content_quality": {
            "weight": 0.3,
            "score": 0.8325,
            "per_repo": {
              "langchain-ai/langchain": {
                "rules_sampled": 10,
                "avg_specificity": 4.5,
                "avg_actionability": 3.9,
                "score": 0.84
              },
              "denoland/deno": {
                "rules_sampled": 10,
                "avg_specificity": 4.4,
                "avg_actionability": 3.3,
                "score": 0.77
              },
              "prisma/prisma": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "vercel/next.js": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "facebook/react": {
                "rules_sampled": 10,
                "avg_specificity": 3.8,
                "avg_actionability": 2.7,
                "score": 0.65
              },
              "anthropics/claude-code": {
                "rules_sampled": 10,
                "avg_specificity": 4.9,
                "avg_actionability": 4.1,
                "score": 0.9
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_sampled": 10,
                "avg_specificity": 4.9,
                "avg_actionability": 4.2,
                "score": 0.91
              },
              "openclaw/openclaw": {
                "rules_sampled": 8,
                "avg_specificity": 5.0,
                "avg_actionability": 4.25,
                "score": 0.925
              }
            }
          },
          "7b_domain_coverage": {
            "weight": 0.25,
            "score": 0.4833,
            "per_repo": {
              "langchain-ai/langchain": {
                "rules_count": 21,
                "has_readme": true,
                "completeness": 4,
                "depth": 6,
                "score": 0.5
              },
              "denoland/deno": {
                "rules_count": 38,
                "llm_failed": true,
                "score": 0.5
              },
              "prisma/prisma": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "vercel/next.js": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "facebook/react": {
                "rules_count": 22,
                "has_readme": true,
                "completeness": 2,
                "depth": 3,
                "score": 0.25
              },
              "anthropics/claude-code": {
                "rules_count": 44,
                "llm_failed": true,
                "score": 0.5
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_count": 58,
                "has_readme": true,
                "completeness": 6,
                "depth": 7,
                "score": 0.65
              },
              "openclaw/openclaw": {
                "rules_count": 8,
                "llm_failed": true,
                "score": 0.5
              }
            }
          },
          "7c_confidence_calibration": {
            "weight": 0.15,
            "score": 0.8,
            "per_repo": {
              "langchain-ai/langchain": {
                "domain_avg_conf": 0.881,
                "code_avg_conf": 0.924,
                "conf_spread": 0.0335,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              },
              "denoland/deno": {
                "domain_avg_conf": 0.868,
                "code_avg_conf": 0.906,
                "conf_spread": 0.0337,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              },
              "prisma/prisma": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "vercel/next.js": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "facebook/react": {
                "domain_avg_conf": 0.841,
                "code_avg_conf": 0.879,
                "conf_spread": 0.0197,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              },
              "anthropics/claude-code": {
                "domain_avg_conf": 0.84,
                "code_avg_conf": 0.917,
                "conf_spread": 0.0297,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              },
              "anthropics/claude-agent-sdk-python": {
                "domain_avg_conf": 0.867,
                "code_avg_conf": 0.92,
                "conf_spread": 0.0257,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              },
              "openclaw/openclaw": {
                "domain_avg_conf": 0.894,
                "code_avg_conf": 0.905,
                "conf_spread": 0.0177,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              }
            }
          },
          "7d_category_accuracy": {
            "weight": 0.15,
            "score": 0.9333,
            "per_repo": {
              "langchain-ai/langchain": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              },
              "denoland/deno": {
                "rules_sampled": 10,
                "matches": 9,
                "total_judged": 10,
                "accuracy": 0.9
              },
              "prisma/prisma": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "vercel/next.js": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "facebook/react": {
                "rules_sampled": 10,
                "matches": 7,
                "total_judged": 10,
                "accuracy": 0.7
              },
              "anthropics/claude-code": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              },
              "openclaw/openclaw": {
                "rules_sampled": 8,
                "matches": 8,
                "total_judged": 8,
                "accuracy": 1.0
              }
            }
          },
          "7e_db_schema_selftest": {
            "weight": 0.15,
            "score": 1.0,
            "agent_output_length": 1556,
            "rules_extracted": 10,
            "facts_found": 5,
            "total_expected_facts": 5,
            "fact_results": [
              {
                "table": "knowledge_rules",
                "concept": "foreign key",
                "related": "repositories",
                "found": true
              },
              {
                "table": "outcome_metrics",
                "concept": "UNIQUE",
                "related": "repo_id",
                "found": true
              },
              {
                "table": "mined_sessions",
                "concept": "UNIQUE",
                "related": "path",
                "found": true
              },
              {
                "table": "proposals",
                "concept": "status",
                "related": "pending",
                "found": true
              },
              {
                "table": "created_at",
                "concept": "timestamp",
                "related": "datetime",
                "found": true
              }
            ],
            "temp_repo_id": 9
          }
        }
      },
      "error": null,
      "duration_seconds": 348.03
    },
    {
      "name": "Ground Truth Recall",
      "score": 0.3717,
      "details": {
        "repos_with_ground_truth": 7,
        "total_repos": 8,
        "avg_recall": 0.3717,
        "per_repo": {
          "langchain-ai/langchain": {
            "total_rules": 154,
            "contaminated": 71,
            "independent": 83,
            "total_guidelines": 16,
            "matched": 13.5,
            "recall": 0.8438,
            "unmatched_examples": [
              "[ ] Tests fail when your new logic is broken (incomplete checklist item, appears truncated)",
              "Check if the function/class is exported in `__init__.py` (before making API changes)",
              "Use keyword-only arguments for new parameters: `*, new_param: str = \"default\"`"
            ],
            "matched_examples": [
              "Monorepo structure with libs/core/, libs/langchain/, libs/partners/, etc. (1.0 - rule 3 describes partners/ separation)",
              "Use `uv` for dependency management (1.0 - rules 5, 21)",
              "Run `make test` for unit tests (1.0 - rules 8, 23)",
              "Run `make lint` and `make format` (1.0 - rules 9, 10, 25, 27)",
              "Run `make format`, `make lint`, `make test` before PR submission (1.0 - rule 42)"
            ],
            "score": 0.84375
          },
          "denoland/deno": {
            "total_rules": 207,
            "contaminated": 66,
            "independent": 141,
            "total_guidelines": 50,
            "matched": 0.0,
            "recall": 0.0,
            "unmatched_examples": [
              "Store build artifacts with 3-day retention for testing but not long-term storage",
              "Use actions/cache/restore for PR builds and actions/cache/save for main branch to optimize cache strategy",
              "Exclude **/.claude/settings.local.json to keep Claude Code local settings out of version control",
              "Exclude flamegraph*.svg and flamebench*.svg performance profiling outputs from version control",
              "Exclude .ipynb_checkpoints/ and Untitled*.ipynb from version control"
            ],
            "matched_examples": [],
            "score": 0.0
          },
          "prisma/prisma": {
            "total_rules": 99,
            "contaminated": 30,
            "independent": 69,
            "total_guidelines": 46,
            "matched": 24.5,
            "recall": 0.5326,
            "unmatched_examples": [
              "Repository is a monorepo for Prisma ORM with TypeScript, Rust, WASM, TSX, Jest, pnpm",
              "Managed via pnpm workspaces and Turborepo",
              "Top-level scripts delegate to scripts/ci/publish.ts",
              "Package-specific commands use `pnpm --filter @prisma/<pkg> <script>`",
              "Run `pnpm build` from root to build all packages in dependency order"
            ],
            "matched_examples": [
              "Node ^20.19 || ^22.12 || >=24.0 required (1.0) - matches rule 12 about CI running Node 20.19.0, 22.12.0, and 24",
              "pnpm >=10.15 <11 required (1.0) - matches rule 18 exactly",
              "Turborepo caches builds (1.0) - matches rule 28 about Turborepo caching configuration",
              "CI tests driver adapters with specific flavors (1.0) - matches rule 11 listing js_pg, js_neon, etc.",
              "TypeScript-first repo with WASM/Rust assets (0.5) - partially matches rule 5 about WASM engine builds"
            ],
            "score": 0.532608695652174
          },
          "vercel/next.js": {
            "total_rules": 77,
            "contaminated": 29,
            "independent": 48,
            "total_guidelines": 48,
            "matched": 19.5,
            "recall": 0.4062,
            "unmatched_examples": [
              "Tests run in parallel groups (e.g., 1/7, 2/7, etc.) using node run-tests.js -g flag for load distribution",
              "CI tests against multiple React versions including default and React 18.3.1 - use NEXT_TEST_REACT_VERSION environment variable to specify version",
              "CI builds and tests both Turbopack and Webpack variants - use environment variables IS_TURBOPACK_TEST=1 and TURBOPACK_DEV=1 or TURBOPACK_BUILD=1 for Turbopack testing",
              "CI skips builds and tests for docs-only changes (changes only to documentation files)",
              "Clippy lint 'too_many_arguments' is explicitly allowed at workspace level"
            ],
            "matched_examples": [
              "Build commands: pnpm --filter=next build and pnpm build (1.0)",
              "Build specific task with pnpm --filter=next exec taskr <task> (1.0)",
              "Fast local development with pnpm --filter=next dev watch mode (1.0)",
              "Run tests fast with NEXT_SKIP_ISOLATE=1 NEXT_TEST_MODE=dev pnpm testonly (1.0)",
              "Always rebuild after switching branches with pnpm build (1.0)"
            ],
            "score": 0.40625
          },
          "facebook/react": {
            "total_rules": 87,
            "contaminated": 2,
            "independent": 85,
            "total_guidelines": 3,
            "matched": 0.0,
            "recall": 0.0,
            "unmatched_examples": [
              "React is a JavaScript library for building user interfaces",
              "React: All files outside `/compiler/`",
              "React Compiler: `/compiler/` directory (has its own instructions)"
            ],
            "matched_examples": [],
            "score": 0.0
          },
          "anthropics/claude-code": {
            "skipped": true,
            "reason": "no CLAUDE.md or AGENTS.md found"
          },
          "anthropics/claude-agent-sdk-python": {
            "total_rules": 118,
            "contaminated": 14,
            "independent": 104,
            "total_guidelines": 12,
            "matched": 4.0,
            "recall": 0.3333,
            "unmatched_examples": [
              "Run `python -m pytest tests/test_client.py` to run specific test file",
              "`client.py` contains ClaudeSDKClient for interactive sessions",
              "`query.py` contains one-shot query function",
              "`types.py` contains type definitions",
              "`_internal/` contains internal implementation details"
            ],
            "matched_examples": [
              "Run `python -m pytest tests/` to run all tests (1.0)",
              "Main package is in `src/claude_agent_sdk/` (1.0)",
              "Run `python -m ruff check src/ tests/ --fix` to check and fix linting issues (0.5)",
              "Run `python -m ruff format src/ tests/` to format code (0.5)",
              "Run `python -m mypy src/` for typechecking (0.5)"
            ],
            "score": 0.3333333333333333
          },
          "openclaw/openclaw": {
            "total_rules": 146,
            "contaminated": 63,
            "independent": 83,
            "total_guidelines": 108,
            "matched": 52.5,
            "recall": 0.4861,
            "unmatched_examples": [
              "Repo: https://github.com/openclaw/openclaw",
              "GitHub issues/comments/PR comments: use literal multiline strings or `-F - <<'EOF'` (or $'...') for real newlines; never embed \"\\n\".",
              "Source code: `src/` (CLI wiring in `src/cli`, commands in `src/commands`, web provider in `src/provider-web.ts`, infra in `src/infra`, media pipeline in `src/media`).",
              "Tests: colocated `*.test.ts`.",
              "Docs: `docs/` (images, queue, Pi config). Built output lives in `dist/`."
            ],
            "matched_examples": [
              "Test setup file at test/setup.ts is loaded before all tests (1.0)",
              "Run `pnpm check:docs` when docs files change (1.0)",
              "Run `pnpm release:check` on push to main (1.0)",
              "Gateway binds to loopback by default (1.0)",
              "Docker runs as non-root user (USER node) (0.5)"
            ],
            "score": 0.4861111111111111
          }
        }
      },
      "error": null,
      "duration_seconds": 181.82
    }
  ]
}