{
  "timestamp": "2026-02-15T19:02:03.508920+00:00",
  "repos": [
    "langchain-ai/langchain",
    "denoland/deno",
    "prisma/prisma",
    "vercel/next.js",
    "facebook/react",
    "anthropics/claude-code",
    "anthropics/claude-agent-sdk-python",
    "openclaw/openclaw"
  ],
  "overall_score": 0.833,
  "evals": [
    {
      "name": "Anti-Pattern Mining",
      "score": 0.875,
      "details": {
        "repos_with_patterns": 7,
        "total_repos": 8,
        "avg_patterns_per_repo": 4.1,
        "total_patterns": 33,
        "per_repo": {
          "langchain-ai/langchain": {
            "patterns_found": 1,
            "valid_patterns": 1,
            "sample": [
              {
                "pr_number": 35067,
                "pr_title": "fix(openai): preserve reasoning_content from OpenAI-compatible providers",
                "author": "saakshigupta2002",
                "merged": false,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "keenborder786",
                    "body": "why do we need this? If you have already have preserved the reasoning_content above for the given chunk???? This is the only difference that I can see from PR #35065, the changes are duplicates. ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "saakshigupta2002",
                    "body": "\r\n@keenborder786 The issue is that even though line 1476 calls `_convert_dict_to_message` (which now extracts `reasoning_content`), the dict it receives from `response.model_dump()` at line 1452 often doesn't actually contain `reasoning_content` - the OpenAI SDK leaves it as an attribute on the raw response object instead. Lines 1504-1526 are the fallback that grabs it directly from those attributes when the dict path misses it. DeepSeek does the same thing (lines 281-311 in their code) and you ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "keenborder786",
                    "body": "@saakshigupta2002 `often doesn't actually contain reasoning_content` can you please share the Doc link for this or wherever you have referred this from?\r\nPlus have you double-tested with both `vLLM` and `OpenAI` directly to make sure `reasoning_content` is being extracted?",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "saakshigupta2002",
                    "body": "> @saakshigupta2002 `often doesn't actually contain reasoning_content` can you please share the Doc link for this or wherever you have referred this from? Plus have you double-tested with both `vLLM` and `OpenAI` directly to make sure `reasoning_content` is being extracted?\r\n\r\n@keenborder786 Sure! The reason `model_dump()` can drop extra fields like `reasoning_content` is because of how Pydantic v2 handles them like extra fields get stored in `model_extra` but are excluded from serialization by ",
                    "path": "libs/partners/openai/langchain_openai/chat_models/base.py",
                    "diff_hunk": "@@ -1503,6 +1509,21 @@ def _create_chat_result(\n                 generations[0].message.additional_kwargs[\"parsed\"] = message.parsed\n             if hasattr(message, \"refusal\"):\n                 generations[0].message.additional_kwargs[\"refusal\"] = message.refusal\n+            if (",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 4
              }
            ]
          },
          "denoland/deno": {
            "patterns_found": 6,
            "valid_patterns": 6,
            "sample": [
              {
                "pr_number": 32152,
                "pr_title": "fix(ext/node): support O_RDONLY | O_CREAT in fs.openSync",
                "author": "shtse8",
                "merged": true,
                "has_formal_rejection": true,
                "review_bodies": [
                  {
                    "author": "Tango992",
                    "state": "CHANGES_REQUESTED",
                    "body": "Thanks! Just a minor review"
                  },
                  {
                    "author": "Tango992",
                    "state": "APPROVED",
                    "body": "LGTM"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "Tango992",
                    "body": "```suggestion\n        read: true,\n        write: false,\n        create: false,\n        truncate: opts.truncate,\n        append: false,\n        create_new: false,\n        custom_flags: opts.custom_flags,\n        mode: opts.mode,\n```\n\nShould it be like this? ",
                    "path": "ext/fs/std_fs.rs",
                    "diff_hunk": "@@ -1029,13 +1029,49 @@ fn open_options(options: OpenOptions) -> fs::OpenOptions {\n   open_options\n }\n \n-#[inline(always)]\n pub fn open_with_checked_path(\n-  options: OpenOptions,\n+  opts: OpenOptions,\n   path: &CheckedPath,\n ) -> FsResult<std::fs::File> {\n-  let opts = open_options_for_checked_path(options, path);\n-  Ok(opts.open(path)?)\n+  // Rust's std::fs::OpenOptions requires write or append ",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "shtse8",
                    "body": "Thanks for the review!\n\nThe current values are intentional:\n\n- `truncate: false` \u2014 Truncating a read-only fd doesn't make sense (and POSIX defines `O_RDONLY | O_TRUNC` as undefined behavior). The truncate flag is already handled in the creation step if it were combined with write.\n- `mode: None` \u2014 The file permission mode is already applied during the creation step above (line 1048). When re-opening for read-only, mode has no effect so we skip it.\n\nThe `custom_flags` and other options that do af",
                    "path": "ext/fs/std_fs.rs",
                    "diff_hunk": "@@ -1029,13 +1029,49 @@ fn open_options(options: OpenOptions) -> fs::OpenOptions {\n   open_options\n }\n \n-#[inline(always)]\n pub fn open_with_checked_path(\n-  options: OpenOptions,\n+  opts: OpenOptions,\n   path: &CheckedPath,\n ) -> FsResult<std::fs::File> {\n-  let opts = open_options_for_checked_path(options, path);\n-  Ok(opts.open(path)?)\n+  // Rust's std::fs::OpenOptions requires write or append ",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "Tango992",
                    "body": "Ah right",
                    "path": "ext/fs/std_fs.rs",
                    "diff_hunk": "@@ -1029,13 +1029,49 @@ fn open_options(options: OpenOptions) -> fs::OpenOptions {\n   open_options\n }\n \n-#[inline(always)]\n pub fn open_with_checked_path(\n-  options: OpenOptions,\n+  opts: OpenOptions,\n   path: &CheckedPath,\n ) -> FsResult<std::fs::File> {\n-  let opts = open_options_for_checked_path(options, path);\n-  Ok(opts.open(path)?)\n+  // Rust's std::fs::OpenOptions requires write or append ",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 4
              },
              {
                "pr_number": 32178,
                "pr_title": "fix(ext/node): add parentPath to Dirent from fs.opendir and support Buffer paths in lstat",
                "author": "bartlomieju",
                "merged": true,
                "has_formal_rejection": true,
                "review_bodies": [
                  {
                    "author": "Tango992",
                    "state": "CHANGES_REQUESTED",
                    "body": "LGTM, just a minor review"
                  },
                  {
                    "author": "Tango992",
                    "state": "APPROVED",
                    "body": "LGTM"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "Tango992",
                    "body": "We should use `getValidatedPathToString` from `ext:deno_node/internal/fs/utils.mjs` instead. It will handle invalid path types by giving the same error as node",
                    "path": "ext/node/polyfills/_fs/_fs_lstat.ts",
                    "diff_hunk": "@@ -11,13 +11,20 @@ import {\n } from \"ext:deno_node/_fs/_fs_stat.ts\";\n import { promisify } from \"ext:deno_node/internal/util.mjs\";\n import { primordials } from \"ext:core/mod.js\";\n+import { Buffer } from \"ext:deno_node/internal/buffer.mjs\";\n \n const {\n   Error,\n   PromisePrototypeThen,\n   ObjectPrototypeIsPrototypeOf,\n } = primordials;\n \n+function toPathString(path: string | URL | Buffer): string ",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 1,
                "review_rounds": 2
              }
            ]
          },
          "prisma/prisma": {
            "patterns_found": 9,
            "valid_patterns": 9,
            "sample": [
              {
                "pr_number": 29158,
                "pr_title": "fix(adapter-mssql): respect curly brace escaping in connection strings",
                "author": "omair445",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 1**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>packages/adapter-mssql/src/connection-string.ts (1)</summary><blockquote>\n> \n> `34-45`: _\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n> \n> **`extractSchemaFromConnectionString` still uses naive `split(';')` \u2014 same bug the PR fixes elsewhere.**\n> \n> If any o"
                  },
                  {
                    "author": "omair445",
                    "state": "COMMENTED",
                    "body": "Thanks for the thorough review @coderabbitai! Both issues addressed:\n\n1. **`extractSchemaFromConnectionString`** \u2014 now uses `splitRespectingBraces()` and `unescapeValue()` for consistency (commit de621d1). Added 5 test cases for escaped schema values.\n\n2. **`braceDepth` negative underflow** \u2014 clamped to prevent going negative on malformed input with unmatched `}` (commit 110a080).\n\nAll 85 tests passing \u2705"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 4**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 2**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**`braceDepth` can go negative on malformed input with unmatched `}`.**\n\nIf the string contains a stray `}` before any `{`, `braceDepth` becomes negative and subsequent semicolons outside any brace pair won't be treated as delimiters, silently producing incorrect results. Clamp or throw on underflow.\n\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n     } else if (char === '}') {\n-      braceDepth--\n+      if (braceDepth > 0) {\n+        braceDepth--\n+      }",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Good catch! Applied the clamp fix \u2014 `braceDepth` is now guarded against going negative on malformed input with unmatched `}`. Pushed in commit 110a080.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445`, thank you for applying the fix! The guard against negative `braceDepth` will ensure malformed input with unmatched closing braces doesn't cause silent parsing errors. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=%40coderabbitai%20spotted%20and%20fixed%20a%20braceDepth%2",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -44,6 +44,61 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n   return undefined\n }\n \n+/**\n+ * Splits a connection string by semicolons while respecting curly brace escaping.\n+ * Values wrapped in curly braces like {value} are treated as literals where\n+ * semicolons and equals signs are not treated as delimiters.\n+ * @param str The string to split\n+ * @retur",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Good coverage of the core curly-brace escaping scenarios.**\n\nConsider adding edge-case tests for:\n1. Empty braces: `password={}` \u2192 expected `\"\"` (currently broken; see `unescapeValue` comment)\n2. Braces not at value boundaries: `password=my{pass}word` \u2192 expected `my{pass}word` (no unescaping)\n3. Unmatched opening brace: `password={unclosed` \u2192 document expected behavior\n\n<!-- fingerprinting:phantom:medusa:phoenix -->\n\n<!-- This is an auto-generated reply by CodeRabbit",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Unclosed `{` silently swallows the rest of the string.**\n\nIf input contains an unmatched `{` (e.g., `password={unclosed;value`), `braceDepth` never returns to 0 and all subsequent semicolons are absorbed into one token. Parameters after the malformed value are silently lost. Consider throwing on `braceDepth !== 0` after the loop, or at minimum adding a test documenting the behavior.\n\n<!-- fingerprinting:phantom:medusa:phoenix -->\n\n<!-- This is an auto-generate",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comments that merely describe what the code does.**\n\nLines 71 and 79 restate what the code already makes clear. As per coding guidelines, avoid inline comments that describe what the code does; only write comments explaining *why*.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n     } else if (char === ';' && braceDepth === 0) {\n-      // Only split on semicolon if we're not inside curly braces\n       parts.push(current)\n       current = ''\n     } else ",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**`{}` (empty braces) is not unescaped due to `length > 2` guard.**\n\nPer MSSQL/JDBC escaping, `password={}` means an empty password. The current `trimmed.length > 2` check returns the literal `{}` instead of an empty string. Use `>= 2` to handle this edge case.\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n function unescapeValue(value: string): string {\n   const trimmed = value.trim()\n-  if (trimmed.startsWith('{') && trimmed.endsWith('}') && trimmed.leng",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Good catch! Now throwing an error when `braceDepth !== 0` after the loop \u2014 this prevents silent parameter loss from unclosed `{` braces. Added test case for malformed input. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Fixed! Changed `length > 2` to `>= 2` so `{}` correctly unescapes to an empty string. Added test case for this edge case. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant inline comments. Code is self-explanatory without them. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Great suggestions! Added test cases for all three edge cases:\n1. Empty braces `{}` \u2192 empty string\n2. Braces not at boundaries `my{pass}word` \u2192 no unescaping\n3. Unclosed brace `{unclosed` \u2192 throws error with clear message\n\nAlso added tests for unmatched closing brace (clamped behavior). All 91 tests passing \u2705. Pushed in commit ecfe1df.",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The code is indeed cleaner and more maintainable without those descriptive comments.\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=Cleaner%20code%3A%20%40coderabbitai%20removed%20redundant%20%22what%22%20comments%20(keep%20comments%20for%20the",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The fix looks good, and I appreciate you adding test coverage for the empty braces edge case. This ensures `password={}` is correctly interpreted as an empty password per MSSQL/JDBC escaping rules.\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Perfect! The validation looks great \u2014 throwing a clear error message with the `braceDepth` value will make debugging much easier. Thank you for adding the test case as well. This prevents any silent parameter loss and makes the parser more robust. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?rela",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -33,17 +33,74 @@ const debug = Debug('prisma:driver-adapter:mssql:connection-string')\n  */\n export function extractSchemaFromConnectionString(connectionString: string): string | undefined {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n-  const parts = withoutProtocol.split(';')\n+  const parts = splitRespectingBraces(withoutProtocol)\n \n   for (const part of parts) {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Excellent work! \ud83c\udf89 Thanks for implementing all the edge-case tests. The coverage is now comprehensive:\n\n\u2705 Empty braces handling  \n\u2705 Mid-value braces (no unescaping)  \n\u2705 Malformed input validation (unclosed brace throws, unmatched closing brace clamped)\n\nThe test suite now properly validates the brace-aware parsing behavior across both typical and boundary scenarios. Great attention to detail!\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet mess",
                    "path": "packages/adapter-mssql/src/connection-string.test.ts",
                    "diff_hunk": "@@ -190,6 +190,72 @@ describe('parseConnectionString', () => {\n     })\n   })\n \n+  describe('escaped values with curly braces', () => {\n+    it('should parse password with curly braces correctly', () => {\n+      const connectionString = 'sqlserver://localhost;database=testdb;user=sa;password={mypassword}'\n+      const config = parseConnectionString(connectionString)\n+\n+      expect(config.password)",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comment that describes what the code does.**\n\nThe function name `splitRespectingBraces` is self-explanatory; the inline comment restates it.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n-  // Split by semicolon while respecting curly brace escaping\n-  const parts = splitRespectingBraces(withoutProtocol)\n+  const parts = splitRespectingBraces(withoutProtocol)\n```\n</details>\n\nAs per coding guidelines: `**/*.{ts,tsx,js,jsx}`: \"Avoid adding useless code c",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -53,8 +110,9 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n export function parseConnectionString(connectionString: string): sql.config {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n \n-  // Split by semicolon to get key-value pairs\n-  const [hostPart, ...paramParts] = withoutProtocol.split(';')\n+  // Split by semicolon while r",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Remove comment that describes what the code does.**\n\nThe `valueParts.join('=')` pattern with destructuring is idiomatic for reassembling split values; the comment restates the obvious.\n\n<details>\n<summary>Suggested diff</summary>\n\n```diff\n-    // Join value parts back together (in case there were = signs in the value)\n-    const value = valueParts.join('=')\n+    const value = valueParts.join('=')\n```\n</details>\n\nAs per coding guidelines: `**/*.{ts,tsx,js,jsx}`: \"Do n",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant comment. Code is self-explanatory without it. Pushed in commit 3bc0493.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -53,8 +110,9 @@ export function extractSchemaFromConnectionString(connectionString: string): str\n export function parseConnectionString(connectionString: string): sql.config {\n   const withoutProtocol = connectionString.replace(/^sqlserver:\\/\\//, '')\n \n-  // Split by semicolon to get key-value pairs\n-  const [hostPart, ...paramParts] = withoutProtocol.split(';')\n+  // Split by semicolon while r",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "omair445",
                    "body": "Removed the redundant comment. The destructuring + join pattern is idiomatic enough without explanation. Pushed in commit 3bc0493.",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "`@omair445` Thank you for addressing this! The code is cleaner without the redundant comment. \ud83c\udf89\n\n<!-- <review_comment_addressed> -->\n\n---\n\n<!-- This is an auto-generated comment: tweet message by coderabbit.ai -->\n\nIf you found this review helpful, would you consider giving us a shout-out on [X](https://twitter.com/intent/tweet?related=CodeRabbitAI&text=Removed%20a%20redundant%20comment%20%E2%80%94%20destructuring%20%2B%20valueParts.join('%3D')%20is%20idiomatic%2C%20so%20the%20code%20is%20cleane",
                    "path": "packages/adapter-mssql/src/connection-string.ts",
                    "diff_hunk": "@@ -78,14 +140,16 @@ export function parseConnectionString(connectionString: string): sql.config {\n   const parameters: Record<string, string> = {}\n \n   for (const part of paramParts) {\n-    const [key, value] = part.split('=', 2)\n+    const [key, ...valueParts] = part.split('=')\n     if (!key) continue\n \n     const trimmedKey = key.trim()\n     if (trimmedKey in parameters) {\n       throw new Erro",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 37,
                "review_rounds": 20
              },
              {
                "pr_number": 29038,
                "pr_title": "feat: query plan caching",
                "author": "aqrln",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 24**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.test.ts (1)</summary><blockquote>\n> \n> `49-64`: _\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n> \n> **Missing test coverage for `wrapRawValues: false` behavior.**\n> \n> The helper hardcodes `wrapRawVa"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 12**\n\n> [!CAUTION]\n> Some comments are outside the diff and can\u2019t be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>\u26a0\ufe0f Outside diff range comments (2)</summary><blockquote>\n> \n> <details>\n> <summary>packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.ts (2)</summary><blockquote>\n> \n> `66-79`: _\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n> \n> **Add a doc comment for the exported `SerializeParams`.**\n> \n> The exported type lacks a document"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 2**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 6**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "state": "COMMENTED",
                    "body": "**Actionable comments posted: 10**\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove redundant doc comments on non-exported helpers.**\n\nThese blocks restate the function names/behavior without adding context; please drop them or replace with rationale-oriented notes.  \n\n\n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-/**\n- * Checks if a value is a placeholder.\n- * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n- */\n function isPlaceholder(\n  ",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Guard against malformed placeholder shapes.**\n\n`isPlaceholder` accepts any object with `$type: 'Param'`, but `getPlaceholderName` assumes `value.value` exists; malformed inputs can throw. Prefer defensive checks or optional chaining.  \n\n\n<details>\n<summary>\ud83d\udee1\ufe0f Suggested hardening</summary>\n\n```diff\n function getPlaceholderName(\n   value: { $type: 'Param'; value: { name: string } } | { prisma__type: 'param'; prisma__value: { name: string } },\n ): string | undefi",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n\n**Resolve placeholders recursively (nested args will mismatch).**\n\n`resolveArgPlaceholders` only handles top-level keys. Placeholders nested inside objects/arrays (common in Prisma filters) remain unresolved, causing `doKeysMatch` to miss rows and return null/P2025 incorrectly.  \n\n\n<details>\n<summary>\u2705 Suggested recursive resolution</summary>\n\n```diff\n function resolveArgPlaceholders(\n   args: Record<string, {}>,\n   placeholderValues: Record<string, unknown>,\n )",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -19,11 +19,69 @@ export type CompactedBatchResponse = {\n   expectNonEmpty: boolean\n }\n \n+/**\n+ * Checks if a value is a placeholder.\n+ * Handles both formats: `{ $type: 'Param', value: { name: '...' } }` and `{ prisma__type: 'param', prisma__value: { name: '...' } }`\n+ */\n+function isPlaceholder(\n+  value: unknown,\n+): value is { $type: 'Param'; value: { name: string } } | { prisma__type: 'para",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Drop the redundant inline comment.**\n\nThe comment restates the next line; remove or replace with rationale if there\u2019s nuance.  \n\n\n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-    // Resolve any placeholders in the args using the provided placeholder values\n     const resolvedArgs = resolveArgPlaceholders(args, placeholderValues)\n```\n</details>\n\nAs per coding guidelines, \"Avoid adding useless code comments that do not add new information. Do not w",
                    "path": "packages/client-engine-runtime/src/batch.ts",
                    "diff_hunk": "@@ -36,9 +94,12 @@ export function convertCompactedRows(rows: {}[], compiledBatch: CompactedBatchRe\n   const selection = new Set(compiledBatch.nestedSelection)\n \n   return compiledBatch.arguments.map((args) => {\n+    // Resolve any placeholders in the args using the provided placeholder values\n+    const resolvedArgs = resolveArgPlaceholders(args, placeholderValues)\n+",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Consider using JSON.stringify for the graph value to ensure safe string escaping.**\n\nWhile `serialized.graph` is likely a base64-encoded string (safe for direct interpolation), using `JSON.stringify` would be more defensive against edge cases where the graph might contain characters that need escaping (e.g., `\"`, `\\`, or newlines).\n\n\n<details>\n<summary>Proposed fix</summary>\n\n```diff\n   private buildParamGraphConfig(): string {\n     const serialized = buildAndSeriali",
                    "path": "packages/client-generator-js/src/TSClient/TSClient.ts",
                    "diff_hunk": "@@ -47,14 +48,23 @@ export class TSClient implements Generable {\n     this.genericsInfo = new GenericArgsInfo(this.dmmf)\n   }\n \n+  private buildParamGraphConfig(): string {\n+    const serialized = buildAndSerializeParamGraph(this.options.dmmf)\n+    const stringsJson = JSON.stringify(JSON.stringify(serialized.strings))\n+    return `config.parameterizationSchema = {\n+  strings: JSON.parse(${stringsJ",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Same string escaping concern and potential code duplication.**\n\n1. Like in `TSClient.ts`, consider using `JSON.stringify(serialized.graph)` instead of direct interpolation for defensive escaping.\n\n2. This function is nearly identical to `buildParamGraphConfig` in `packages/client-generator-js/src/TSClient/TSClient.ts`. Consider extracting this into a shared utility to reduce duplication between the JS and TS client generators.\n\n\n<details>\n<summary>Proposed fix for es",
                    "path": "packages/client-generator-ts/src/TSClient/file-generators/ClassFile.ts",
                    "diff_hunk": "@@ -60,12 +63,23 @@ function clientConfig(context: GenerateContext, options: TSClientOptions) {\n     activeProvider: options.activeProvider,\n     inlineSchema,\n     runtimeDataModel: { models: {}, enums: {}, types: {} },\n+    parameterizationSchema: { strings: [], graph: '' },\n   }\n \n   return `\n const config: runtime.GetPrismaClientConfig = ${JSON.stringify(config, null, 2)}\n ${buildRuntimeDataMo",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Add a doc comment for the exported helper.**\n\nThis exported function needs a proper documentation comment.  \n\n\n<details>\n<summary>\ud83d\udcdd Suggested doc comment</summary>\n\n```diff\n+/**\n+ * Loads the Wasm QueryCompiler for the given provider for benchmark runs.\n+ */\n export function loadQueryCompiler(provider: string): Promise<QueryCompilerConstructor> {\n```\n</details>\n\nAs per coding guidelines, \u201cWrite documentation comments for exported items using proper doc comment",
                    "path": "packages/client/src/__tests__/benchmarks/query-performance/qc-loader.ts",
                    "diff_hunk": "@@ -0,0 +1,38 @@\n+import fs from 'node:fs'\n+import path from 'node:path'\n+\n+import { QueryCompilerConstructor } from '@prisma/client-common'\n+\n+import { wasmQueryCompilerLoader } from '../../../runtime/core/engines/client/WasmQueryCompilerLoader'\n+\n+export function loadQueryCompiler(provider: string): Promise<QueryCompilerConstructor> {\n+  const runtimeBase = path.join(__dirname, '..', '..', '..',",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**TODO comment should be tracked.**\n\nLine 105-106 contains a `// todo: remove this` comment. Consider creating an issue to track this cleanup or add more context about when/why it should be removed.\n\n<!-- fingerprinting:phantom:medusa:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
                    "path": "packages/client/src/runtime/core/engines/client/ClientEngine.ts",
                    "diff_hunk": "@@ -98,6 +101,10 @@ export class ClientEngine implements Engine {\n   #state: EngineState = { type: 'disconnected' }\n   #queryCompilerLoader: QueryCompilerLoader\n   #executorKind: ExecutorKind\n+  #queryPlanCache: QueryPlanCache\n+  // todo: remove this\n+  #queryPlanCacheEnabled: boolean\n+  #paramGraph: ParamGraph",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Raw query detection via `modelName === undefined` may be fragile.**\n\nConsider using the `isRawQuery` helper (defined at line 756) for consistency with the single-query path.\n\n\n<details>\n<summary>\u267b\ufe0f Use isRawQuery helper for consistency</summary>\n\n```diff\n-    const hasRawQueries = firstModelName === undefined\n+    const hasRawQueries = queries.some(isRawQuery)\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMP",
                    "path": "packages/client/src/runtime/core/engines/client/ClientEngine.ts",
                    "diff_hunk": "@@ -493,13 +529,41 @@ export class ClientEngine implements Engine {\n     const firstAction = queries[0].action\n     const firstModelName = queries[0].modelName\n \n-    const request = getBatchRequestPayload(queries, transaction)\n+    const batchPayload = getBatchRequestPayload(queries, transaction)\n+    const request = JSON.stringify(batchPayload)\n \n     const { executor, queryCompiler } = await th",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Mutable `export let` with async initialization is error-prone.**\n\nThe `export let paramGraph` pattern combined with eager async initialization creates a race condition window. If a test imports this module and synchronously accesses `paramGraph` before `initPromise` resolves, it will be `undefined`.\n\nConsider making the access safer:\n\n\n<details>\n<summary>\u267b\ufe0f Safer pattern using getter or required await</summary>\n\n**Option 1: Getter that throws if not initialized**\n```",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize-tests/test-fixtures.ts",
                    "diff_hunk": "@@ -0,0 +1,117 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import { getDMMF } from '@prisma/client-generator-js'\n+import { ParamGraph } from '@prisma/param-graph'\n+import { buildAndSerializeParamGraph } from '@prisma/param-graph-builder'\n+\n+/**\n+ * Prisma schema that simulates a User model with common fields and filters,\n+ * along with related Post and Profile models.\n+ */\n+",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Eager initialization has unhandled rejection risk.**\n\nThe `initializeFixtures()` promise is created at module load, but if it rejects, the error may be swallowed unless a test explicitly awaits `initPromise`. Consider adding error handling:\n\n\n<details>\n<summary>\u267b\ufe0f Add error handling for eager init</summary>\n\n```diff\n const initPromise = initializeFixtures().then((pg) => {\n   paramGraph = pg\n+}).catch((err) => {\n+  console.error('Failed to initialize test fixtures:', ",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize-tests/test-fixtures.ts",
                    "diff_hunk": "@@ -0,0 +1,117 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import { getDMMF } from '@prisma/client-generator-js'\n+import { ParamGraph } from '@prisma/param-graph'\n+import { buildAndSerializeParamGraph } from '@prisma/param-graph-builder'\n+\n+/**\n+ * Prisma schema that simulates a User model with common fields and filters,\n+ * along with related Post and Profile models.\n+ */\n+",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Consider documenting the custom action type cast.**\n\nThe `as any` cast for `'findByDate'` action works for testing, but a brief comment explaining this is a test-only synthetic action would improve clarity.\n\n```diff\n       const query: JsonQuery = {\n         modelName: 'User',\n-        action: 'findByDate' as any,\n+        action: 'findByDate' as any, // Synthetic action for testing DateTime parameterization\n         query: {\n```\n\n<!-- suggestion_start -->\n\n<details>",
                    "path": "packages/client/src/runtime/core/engines/client/parameterization/parameterize.test.ts",
                    "diff_hunk": "@@ -0,0 +1,687 @@\n+import type { RuntimeDataModel } from '@prisma/client-common'\n+import type { JsonQuery } from '@prisma/json-protocol'\n+import type { ParamGraphData } from '@prisma/param-graph'\n+import { EdgeFlag, ParamGraph, ScalarMask } from '@prisma/param-graph'\n+\n+import { parameterizeBatch, parameterizeQuery } from './parameterize'\n+\n+function createEnumLookup(runtimeDataModel: RuntimeDataM",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Rename test file to kebab-case.**  \n`QueryPlanCache.test.ts` should be kebab-case (e.g., `query-plan-cache.test.ts`).  \n  \nAs per coding guidelines: Use kebab-case for new file names (e.g., `query-utils.ts`, `filter-operators.test.ts`).\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
                    "path": "packages/client/src/runtime/core/engines/client/QueryPlanCache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove inline \u201cwhat it does\u201d comments.**  \nThe two inline comments restate the code.  \n  \n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-      // Access key1 to make it recently used\n       cache.getSingle('key1')\n\n-      // Add key3, should evict key2 (oldest)\n       cache.setSingle('key3', plan3)\n```\n</details>  \nAs per coding guidelines: Avoid adding useless code comments that do not add new information. Do not write inline comments that describ",
                    "path": "packages/client/src/runtime/core/engines/client/query-plan-cache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'\n+\n+describe('QueryPlanCache', () => {\n+  describe('single cache', () => {\n+    it('stores and retrieves entries', () => {\n+      const cache = new QueryPlanCache()\n+      const plan = { type: 'value' as const, args: null }\n+\n+      cache.setSingle('key1', plan)\n+      const retrieved = cache.getSingle('key1')\n+\n+      expect(retr",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n**Remove inline \u201cwhat it does\u201d comments.**  \nThe two inline comments restate the code.  \n  \n<details>\n<summary>\ud83e\uddf9 Suggested cleanup</summary>\n\n```diff\n-      // Access key1 to make it recently used\n       cache.getBatch('key1')\n\n-      // Add key3, should evict key2 (oldest)\n       cache.setBatch('key3', makeResponse(3))\n```\n</details>  \nAs per coding guidelines: Avoid adding useless code comments that do not add new information. Do not write inline comments that",
                    "path": "packages/client/src/runtime/core/engines/client/query-plan-cache.test.ts",
                    "diff_hunk": "@@ -0,0 +1,201 @@\n+import { QueryPlanCache } from './QueryPlanCache'\n+\n+describe('QueryPlanCache', () => {\n+  describe('single cache', () => {\n+    it('stores and retrieves entries', () => {\n+      const cache = new QueryPlanCache()\n+      const plan = { type: 'value' as const, args: null }\n+\n+      cache.setSingle('key1', plan)\n+      const retrieved = cache.getSingle('key1')\n+\n+      expect(retr",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**TODO: Performance optimization for bytes conversion.**\n\nThe current implementation converts the ArrayBuffer view to a Buffer before base64 encoding.\n\n\nWould you like me to open an issue to track this performance optimization? Potential approaches include using `btoa` with a typed array view or a direct base64 encoding library that avoids the intermediate Buffer allocation.\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by Cod",
                    "path": "packages/client/src/runtime/core/jsonProtocol/serializeJsonQuery.ts",
                    "diff_hunk": "@@ -309,6 +312,7 @@ function serializeArgumentsValue(\n \n   if (ArrayBuffer.isView(jsValue)) {\n     const { buffer, byteOffset, byteLength } = jsValue\n+    // TODO(perf): get rid of this conversion\n     return { $type: 'Bytes', value: Buffer.from(buffer, byteOffset, byteLength).toString('base64') }\n   }",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe0 Major_\n\n**Add teardown for per-test Prisma clients.**\n\nLine 62-64 now creates a new Prisma client per test but never disconnects prior instances, which can leak connections and keep open handles across the suite. Add an `afterEach` to disconnect (or reuse a single client).\n\n\n<details>\n<summary>\ud83e\uddf9 Proposed fix</summary>\n\n```diff\n beforeEach(() => {\n   prisma = newPrismaClient()\n })\n+\n+afterEach(async () => {\n+  await prisma.$disconnect()\n+})\n```\n</details>\n\n<!-- suggestio",
                    "path": "packages/client/tests/functional/tracing/tests.ts",
                    "diff_hunk": "@@ -59,6 +59,10 @@ afterAll(() => {\n   context.disable()\n })\n \n+beforeEach(() => {\n+  prisma = newPrismaClient()\n+})",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n**Add documentation comments for exported types.**\n\nThe new `Placeholder` and `PlaceholderType` types are public exports but lack documentation comments. As per coding guidelines, exported items should have proper doc comments.\n\n<details>\n<summary>\ud83d\udcdd Suggested documentation</summary>\n\n```diff\n+/**\n+ * Represents a placeholder in a parameterized query.\n+ * Combines a unique name with type information for runtime value binding.\n+ */\n export type Placeholder = {\n   name: s",
                    "path": "packages/json-protocol/src/index.ts",
                    "diff_hunk": "@@ -84,10 +85,29 @@ export type JsonInputTaggedValue =\n   | JsonTaggedValue\n   | EnumTaggedValue\n   | RawTaggedValue\n+  | PlaceholderTaggedValue\n \n export type JsonOutputTaggedValue =\n   | DateTaggedValue\n   | DecimalTaggedValue\n   | BytesTaggedValue\n   | BigIntTaggedValue\n   | JsonTaggedValue\n+\n+export type Placeholder = {\n+  name: string\n+} & PlaceholderType\n+\n+export type PlaceholderType =\n+  |",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\ud83e\uddf9 Nitpick_ | _\ud83d\udd35 Trivial_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n\ud83c\udfc1 Script executed:\n\n```shell\n#!/bin/bash\n\n# Check for test files in param-graph-builder\necho \"=== Test files in param-graph-builder ===\"\nfind packages/param-graph-builder -type f \\( -name \"*.test.ts\" -o -name \"*.test.js\" -o -name \"*.spec.ts\" -o -name \"*.spec.js\" \\) 2>/dev/null || echo \"No test files found\"\n\necho \"\"\necho \"=== param-graph-builder package.json scripts ===\"\ncat packages/param-graph-builder/package.json | grep ",
                    "path": "packages/param-graph-builder/package.json",
                    "diff_hunk": "@@ -0,0 +1,39 @@\n+{\n+  \"name\": \"@prisma/param-graph-builder\",\n+  \"version\": \"0.0.0\",\n+  \"description\": \"This package is intended for Prisma's internal use\",\n+  \"main\": \"dist/index.js\",\n+  \"module\": \"dist/index.mjs\",\n+  \"types\": \"dist/index.d.ts\",\n+  \"exports\": {\n+    \".\": {\n+      \"require\": {\n+        \"types\": \"./dist/index.d.ts\",\n+        \"default\": \"./dist/index.js\"\n+      },\n+      \"import\": {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "coderabbitai[bot]",
                    "body": "_\u26a0\ufe0f Potential issue_ | _\ud83d\udfe1 Minor_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n\ud83c\udfc1 Script executed:\n\n```shell\ncat -n packages/param-graph-builder/src/dmmf-traverser.ts | sed -n '380,440p'\n```\n\nRepository: prisma/prisma\n\nLength of output: 2179\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\nrg -n 'buildInputTypeNode|#pendingInputNodes' packages/param-graph-builder/src/dmmf-traverser.ts -B 2 -A 10\n```\n\nRepository: prisma/prisma\n\nLength of output: 2617\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\nrg -n '#drainPendingWork",
                    "path": "packages/param-graph-builder/src/dmmf-traverser.ts",
                    "diff_hunk": "@@ -0,0 +1,453 @@\n+/**\n+ * DMMFTraverser: DMMF traversal logic for building ParamGraph.\n+ *\n+ * This class contains the traversal algorithms that walk DMMF structures\n+ * and build the param graph. It uses ParamGraphBuilder for allocation\n+ * and caching.\n+ */\n+\n+import type * as DMMF from '@prisma/dmmf'\n+import { ModelAction } from '@prisma/dmmf'\n+import type { InputEdgeData, OutputEdgeData } fro",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 50,
                "review_rounds": 20
              }
            ]
          },
          "vercel/next.js": {
            "patterns_found": 9,
            "valid_patterns": 9,
            "sample": [
              {
                "pr_number": 89166,
                "pr_title": "fix(agents-md): use `require.resolve()` to get the installed `next` version",
                "author": "devjiwonchoi",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "vercel[bot]",
                    "body": "Missing return statement in `getNextjsVersion` when `pkg.version` is falsy causes function to return `undefined` instead of `NextjsVersionResult`\n<!-- VADE-CATEGORY: logic -->\n<!-- VADE-GITHUB-SUGGESTION-ID:e4bc8d1246d6455bd9265cf7ecb2a3ab723436e9355e36cff924b442ee983ef0 -->\n\n<!-- VADE-RECOMMENDATION: FIX -->\n<a href=\"https://vercel.com/vercel/~/agent/tasks/64e5e113-ab17-443c-85a2-67a21b018902#suggestion-e4bc8d1246d6455bd9265cf7ecb2a3ab723436e9355e36cff924b442ee983ef0\" rel=\"noreferrer\">\n  <pictu",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "gaojude",
                    "body": "this is smart. only part that's missing is the test.",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }\n-\n   try {\n-    const packageJson = JSON.parse(fs.readFileS",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "gaojude",
                    "body": "also need to update `findNextjsInWorkspace` to this logic",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }\n-\n   try {\n-    const packageJson = JSON.parse(fs.readFileS",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "The original bug was that the function could return `undefined` (implicitly) if `pkg.version` was falsy but the try block didn't throw. The current code now always returns `{ version: pkg.version }` from the try block - this is an object, not `undefined`. Even if `pkg.version` is undefined, the function returns an object `{ version: undefined }`, not `undefined` itself. The calling code in `pullDocs` checks `if (!versionResult.version)` which handles both `null` and `undefined` correctly, preven",
                    "path": "packages/next-codemod/lib/agents-md.ts",
                    "diff_hunk": "@@ -16,27 +16,13 @@ interface NextjsVersionResult {\n }\n \n export function getNextjsVersion(cwd: string): NextjsVersionResult {\n-  const packageJsonPath = path.join(cwd, 'package.json')\n-\n-  if (!fs.existsSync(packageJsonPath)) {\n-    return {\n-      version: null,\n-      error: 'No package.json found in the current directory',\n-    }\n-  }",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 4,
                "review_rounds": 5
              },
              {
                "pr_number": 83108,
                "pr_title": "[fragment-scroll] Ensure hoisted elements don't break scroll-to-top on page navigations",
                "author": "eps1lon",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "vercel[bot]",
                    "body": "```suggestion\n      // Set focus on the element - only call focus() if domNode is an HTMLElement\n      if ('focus' in domNode && typeof domNode.focus === 'function') {\n        domNode.focus()\n      }\n```\n\n\n<!-- VADE-CATEGORY: type-safety -->\nThe code calls `focus()` on `domNode` which can be a `FragmentInstance`, but `FragmentInstance` doesn't have a `focus()` method, causing a potential runtime error.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nLi",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: type-safety -->\nThe new scroll handler attempts to call `experimental_scrollIntoView` method on `domNode`, but this method doesn't exist on either `FragmentInstance` or `HTMLElement` types, which will cause a runtime error.\n\n<details>\n<summary>View Details</summary>\n\n<br/>\n<details>\n<summary>\ud83d\udcdd Patch Details</summary>\n\n```diff\ndiff --git a/packages/next/src/client/components/layout-router.tsx b/packages/next/src/client/components/layout-router.tsx\nindex dca35508fc..4e5a22ad05",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "The cDM + cDU logic is quite sketchy so I'm keeping this as a class Component.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: configuration -->\nThe test uses the wrong environment variable name `__NEXT_EXPERIMENTAL_APP_NEW_SCROLL_HANDLER` instead of `__NEXT_APP_NEW_SCROLL_HANDLER` that's defined in the build configuration.\n\n<details>\n<summary>View Details</summary>\n\n<br/>\n<details>\n<summary>\ud83d\udcdd Patch Details</summary>\n\n```diff\ndiff --git a/test/development/acceptance-app/hydration-error.test.ts b/test/development/acceptance-app/hydration-error.test.ts\nindex 7a8ab95d42..24a403a108 100644\n--- a/test/de",
                    "path": "test/development/acceptance-app/hydration-error.test.ts",
                    "diff_hunk": "@@ -5,6 +5,14 @@ import path from 'path'\n import { outdent } from 'outdent'\n import { getToastErrorCount, retry } from 'next-test-utils'\n \n+const enableNewScrollHandler = Boolean(\n+  process.env.__NEXT_EXPERIMENTAL_APP_NEW_SCROLL_HANDLER",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "\n<!-- VADE-CATEGORY: performance -->\nThe useLayoutEffect with `undefined` dependencies runs on every render, which could cause performance issues and unexpected behavior.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nThe `useLayoutEffect` in `InnerScrollAndFocusHandlerNew` uses `undefined` as its dependency array, which means it runs after every render instead of only when necessary. This is different from the class component approach where `componen",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -303,6 +322,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "That's matching the old behavior. We ensure it's only run once by flipping `.apply`",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -303,6 +322,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "It does in React DOM which is what we're targeting here.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "It does in this branch",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -306,6 +310,87 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+class InnerScrollAndFocusHandlerNew extends React.Component<ScrollAndFocusHandlerProps> {\n+  childrenRef = React.createRef<FragmentInstance>()\n+\n+  handlePotentialScroll = () => {\n+    // Handle scroll and focus, it's only applied once in the first useEffect that triggers that changed.\n",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "```suggestion\n  it('should scroll to top even if React hoists children', async () => {\n```\n\n\n<!-- VADE-CATEGORY: unfinished-work -->\nThe test uses `fit` instead of `it`, which means only this single test will run and all other tests in the suite will be skipped.\n\n<details>\n<summary>View Details</summary>\n<!-- PATCH_DETAILS_PLACEHOLDER -->\n\n### Analysis\nThe test case `'should scroll to top even if React hoists children'` is using `fit()` instead of `it()` on line 283. In Jest/testing frameworks, ",
                    "path": "test/e2e/app-dir/router-autoscroll/router-autoscroll.test.ts",
                    "diff_hunk": "@@ -275,4 +279,27 @@ describe('router autoscrolling on navigation', () => {\n       })\n     })\n   })\n+\n+  fit('should scroll to top even if React hoists children', async () => {",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "vercel[bot]",
                    "body": "This issue has been resolved.\n\n<!-- VADE-THREAD: RESOLVED -->",
                    "path": "test/e2e/app-dir/router-autoscroll/router-autoscroll.test.ts",
                    "diff_hunk": "@@ -275,4 +279,27 @@ describe('router autoscrolling on navigation', () => {\n       })\n     })\n   })\n+\n+  fit('should scroll to top even if React hoists children', async () => {",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "Confirm this only had an effect if the segment was focusable (scrollable, interactive etc). I think that was pretty rare so we should just drop it.\n\nThe deciding factor is assistive tech. If screen readers move an internal pointer when you focus something unfocusable, we need to rethink the React behavior.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -246,6 +265,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "eps1lon",
                    "body": "Will change behavior in a follow-up to address various a11y issues this causes.",
                    "path": "packages/next/src/client/components/layout-router.tsx",
                    "diff_hunk": "@@ -246,6 +265,108 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n   }\n }\n \n+function InnerScrollAndFocusHandlerNew(props: ScrollAndFocusHandlerProps) {\n+  const childrenRef = React.useRef<FragmentInstance>(null)\n+\n+  useLayoutEffect(\n+    () => {\n+      const { focusAndScrollRef, segmentPath } = props\n+      // Handle scroll and focus, it's only applied once i",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 12,
                "review_rounds": 11
              }
            ]
          },
          "facebook/react": {
            "patterns_found": 3,
            "valid_patterns": 3,
            "sample": [
              {
                "pr_number": 35720,
                "pr_title": "[eslint-plugin-react-hooks] Add ESLint v10 support",
                "author": "azat-io",
                "merged": true,
                "has_formal_rejection": true,
                "review_bodies": [
                  {
                    "author": "josephsavona",
                    "state": "APPROVED",
                    "body": "Awesome, thanks!"
                  },
                  {
                    "author": "josephsavona",
                    "state": "CHANGES_REQUESTED",
                    "body": "You'll also need to update https://github.com/facebook/react/blob/main/.github/workflows/runtime_eslint_plugin_e2e.yml#L27-L31 to make sure the new fixture runs in CI"
                  }
                ],
                "inline_review_comments": [],
                "total_review_comments": 0,
                "review_rounds": 2
              },
              {
                "pr_number": 30522,
                "pr_title": "[Fiber] Make DevTools Config use Static Injection",
                "author": "sebmarkbage",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [],
                "inline_review_comments": [
                  {
                    "author": "hoxyq",
                    "body": "This will require some changes on React Native side before the sync",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "sebmarkbage",
                    "body": "Why is that? I tried to keep it the same as far as what React Native observes.",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "hoxyq",
                    "body": "You are right, I thought we are calling `<renderer>.rendererConfig.getInspectorDataForViewAtPoint` on RN side, but we [actually use it from RDT global hook](https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Inspector/getInspectorDataForViewAtPoint.js#L70), so should be perfectly fine",
                    "path": "packages/react-native-renderer/src/ReactFiberConfigFabric.js",
                    "diff_hunk": "@@ -48,11 +48,27 @@ const {\n   unstable_getCurrentEventPriority: fabricGetCurrentEventPriority,\n } = nativeFabricUIManager;\n \n+import {getClosestInstanceFromNode} from './ReactFabricComponentTree';\n+\n+import {\n+  getInspectorDataForViewTag,\n+  getInspectorDataForViewAtPoint,\n+  getInspectorDataForInstance,\n+} from './ReactNativeFiberInspector';\n+\n import {\n   enableFabricCompleteRootInCommitPhase,",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 3
              }
            ]
          },
          "anthropics/claude-code": {
            "patterns_found": 0,
            "valid_patterns": 0,
            "sample": []
          },
          "anthropics/claude-agent-sdk-python": {
            "patterns_found": 1,
            "valid_patterns": 1,
            "sample": [
              {
                "pr_number": 91,
                "pr_title": "feat: enable custom transports",
                "author": "rushilpatel0",
                "merged": true,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "dicksontsai",
                    "state": "COMMENTED",
                    "body": "I think this change is reasonable. Left some comments that should be addressed. Thanks!"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "dicksontsai",
                    "body": "Please add back the newlines and the end of these files. These files should not appear in the diff.",
                    "path": "tests/test_integration.py",
                    "diff_hunk": "",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "dicksontsai",
                    "body": "Is this import actually needed?",
                    "path": "src/claude_code_sdk/_internal/transport/__init__.py",
                    "diff_hunk": "@@ -4,6 +4,8 @@\n from collections.abc import AsyncIterator\n from typing import Any\n \n+from claude_code_sdk.types import ClaudeCodeOptions",
                    "has_suggestion_block": false
                  },
                  {
                    "author": "dicksontsai",
                    "body": "Now that we're exposing something internal, can you expand the class docstring with the message below?\r\n\r\n```\r\n    \"\"\"Abstract transport for Claude communication.\r\n\r\n    WARNING: This internal API is exposed for custom transport implementations\r\n    (e.g., remote Claude Code connections). The Claude Code team may change or\r\n    or remove this abstract class in any future release. Custom implementations\r\n    must be updated to match interface changes.\r\n    \"\"\"\r\n```",
                    "path": "src/claude_code_sdk/_internal/transport/__init__.py",
                    "diff_hunk": "@@ -4,6 +4,8 @@\n from collections.abc import AsyncIterator\n from typing import Any\n \n+from claude_code_sdk.types import ClaudeCodeOptions\n+\n \n class Transport(ABC):\n     \"\"\"Abstract transport for Claude communication.\"\"\"",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 2
              }
            ]
          },
          "openclaw/openclaw": {
            "patterns_found": 4,
            "valid_patterns": 4,
            "sample": [
              {
                "pr_number": 16869,
                "pr_title": "feat(discord): Add rich embed support with templates",
                "author": "cysesaas",
                "merged": false,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "greptile-apps[bot]",
                    "state": "COMMENTED",
                    "body": "<sub>6 files reviewed, 3 comments</sub>\n\n<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Action field silently dropped when `details` is omitted**\n\nWhen `details` is not provided, `fields` is `undefined` (from the optional chain `params.details?.map(...)`). The subsequent `fields?.push(...)` on line 95 is a no-op on `undefined`, so the action field is silently lost. This means `createAlertEmbed({ title: \"...\", message: \"...\", action: \"Do something\" })` produces an embed with no fields at all.\n\nInitialize `fields` to an empty array as fallback:\n\n```suggestion\n  const fields = param",
                    "path": "src/discord/embed-templates.ts",
                    "diff_hunk": "@@ -0,0 +1,318 @@\n+/**\n+ * Discord Embed Templates\n+ * \n+ * Beautiful, ready-to-use embed templates for common use cases.\n+ * All templates follow Discord's embed limits and best practices.\n+ * \n+ * @see https://discord.com/developers/docs/resources/channel#embed-object\n+ */\n+\n+export type DiscordEmbedColor = number;\n+\n+/** Discord brand color (Blurple) */\n+export const DISCORD_BLURPLE: DiscordEmb",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Test asserts non-existent `label` property instead of `name`**\n\n`createSessionWarningEmbed` delegates to `createAlertEmbed`, which maps `{ label, value }` details into `{ name, value, inline }` fields. The returned embed fields have a `name` property, not `label`. This assertion accesses `f.label` which is always `undefined`, so `f.label === \"Size\"` is always `false`, and `expect(false).toBeTruthy()` should fail.\n\n```suggestion\n      expect(embed.fields?.some((f) => f.name === \"Size\")).toBeTru",
                    "path": "src/discord/embed-templates.test.ts",
                    "diff_hunk": "@@ -0,0 +1,303 @@\n+import { describe, expect, it } from \"vitest\";\n+import {\n+  createAlertEmbed,\n+  createCronStatusEmbed,\n+  createErrorEmbed,\n+  createInfoEmbed,\n+  createMemoryStatusEmbed,\n+  createSessionWarningEmbed,\n+  createStatusEmbed,\n+  createSuccessEmbed,\n+  createSystemStatusEmbed,\n+  EmbedColors,\n+  DISCORD_BLURPLE,\n+} from \"./embed-templates.js\";\n+\n+describe(\"Discord Embed Templates\"",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Docs link uses relative path with `.md` extension**\n\nPer repository Mintlify conventions, internal doc links should be root-relative without `.md` extensions. The current relative path `../docs/channels/discord.md` is also incorrect since this file is already inside `docs/`.\n\n```suggestion\n- [OpenClaw Discord Channel Docs](/channels/discord)\n```\n\n**Context Used:** Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184",
                    "path": "docs/discord-embeds.md",
                    "diff_hunk": "@@ -0,0 +1,380 @@\n+# Discord Embeds - Usage Guide\n+\n+Discord embeds allow you to send rich, structured messages with colors, fields, and formatting.\n+\n+## Quick Start\n+\n+### Basic Example\n+\n+```typescript\n+import { sendMessageDiscord } from './discord/send.js';\n+import { createStatusEmbed, EmbedColors } from './discord/embed-templates.js';\n+\n+// Create a simple status embed\n+const embed = createSt",
                    "has_suggestion_block": true
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 1
              },
              {
                "pr_number": 17310,
                "pr_title": "feat: add AI PR triage GitHub Action for duplicate detection",
                "author": "olivier-motium",
                "merged": false,
                "has_formal_rejection": false,
                "review_bodies": [
                  {
                    "author": "greptile-apps[bot]",
                    "state": "COMMENTED",
                    "body": "<sub>3 files reviewed, 3 comments</sub>\n\n<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>"
                  }
                ],
                "inline_review_comments": [
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**`...opts` spread overrides merged headers**\n\nThe `...opts` spread at line 17 replaces the entire `headers` object constructed on lines 12\u201316 whenever `opts` includes a `headers` key. This means callers that pass both `headers` and other options (like `method` or `body`) \u2014 which `ensureLabel` and `applyLabels` both do \u2014 will lose the `Authorization`, `Accept`, and `X-GitHub-Api-Version` headers. Every label-creation and label-application call will fail with a 401 or 403.\n\nTo fix this, destructu",
                    "path": "scripts/pr-triage-github.mjs",
                    "diff_hunk": "@@ -0,0 +1,135 @@\n+/**\n+ * GitHub API helpers for PR triage.\n+ * Handles data fetching, pagination, and PR summary generation.\n+ */\n+\n+const GITHUB_API = \"https://api.github.com\";\n+\n+export function createGitHubClient(token) {\n+  async function gh(path, opts = {}) {\n+    const url = path.startsWith(\"http\") ? path : `${GITHUB_API}${path}`;\n+    const res = await fetch(url, {\n+      headers: {\n+    ",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**`workflow_dispatch` default \"0\" always errors out**\n\nThe workflow input description says `\"Triage a specific PR number (0 = latest)\"`, but the code treats `0` as an error and exits. When a maintainer triggers the workflow manually without providing a PR number, it will always fail because `PR_NUMBER` defaults to `\"0\"` \u2192 `Number(\"0\")` \u2192 `0` \u2192 `!0` is `true` \u2192 `process.exit(1)`.\n\nEither implement logic to fetch the latest open PR when `prNumber` is 0, or change the workflow default and error mes",
                    "path": "scripts/pr-triage.mjs",
                    "diff_hunk": "@@ -0,0 +1,393 @@\n+#!/usr/bin/env node\n+/**\n+ * PR Triage \u2014 AI-powered duplicate detection and categorization.\n+ *\n+ * Single Claude call per PR with cached context of all open PRs\n+ * and recent merge/close decisions. Outputs silent labels only \u2014 no\n+ * public bot comments (political risk: matplotlib/crabby-rathbun Feb 2026).\n+ *\n+ * Default model: Claude Opus 4.6 (1M context). Override with TRIA",
                    "has_suggestion_block": true
                  },
                  {
                    "author": "greptile-apps[bot]",
                    "body": "**Sequential API calls for up to 500 PRs will be very slow**\n\n`getOpenPRSummaries` makes one additional API call per PR to fetch its files. With the default `MAX_OPEN_PRS=500`, this results in up to 500 sequential HTTP requests. Combined with the paginated fetch of the PR list itself (5 pages of 100), that's ~505 serial requests. At ~200ms per API call, this would take ~100 seconds just for data collection \u2014 and GitHub Actions has rate limits (5000 requests/hour for app tokens) that could be hit",
                    "path": "scripts/pr-triage-github.mjs",
                    "diff_hunk": "@@ -0,0 +1,135 @@\n+/**\n+ * GitHub API helpers for PR triage.\n+ * Handles data fetching, pagination, and PR summary generation.\n+ */\n+\n+const GITHUB_API = \"https://api.github.com\";\n+\n+export function createGitHubClient(token) {\n+  async function gh(path, opts = {}) {\n+    const url = path.startsWith(\"http\") ? path : `${GITHUB_API}${path}`;\n+    const res = await fetch(url, {\n+      headers: {\n+    ",
                    "has_suggestion_block": false
                  }
                ],
                "total_review_comments": 3,
                "review_rounds": 1
              }
            ]
          }
        }
      },
      "error": null,
      "duration_seconds": 157.37
    },
    {
      "name": "Provenance Coverage",
      "score": 0.9852,
      "details": {
        "total_rules": 809,
        "rules_with_provenance_url": 785,
        "rules_with_provenance_summary": 809,
        "valid_github_urls": 765,
        "url_coverage_pct": 97.0,
        "summary_coverage_pct": 100.0
      },
      "error": null,
      "duration_seconds": 0.01
    },
    {
      "name": "Path Scoping Coverage",
      "score": 0.5637,
      "details": {
        "total_rules": 809,
        "rules_with_paths": 456,
        "rules_with_valid_globs": 456,
        "path_coverage_pct": 56.4
      },
      "error": null,
      "duration_seconds": 0.01
    },
    {
      "name": "Modular Rules Generation",
      "score": 0.9625,
      "details": {
        "total_files_generated": 123,
        "valid_files": 123,
        "repos_with_donot": 7,
        "file_validity_pct": 100.0,
        "donot_coverage_pct": 87.5,
        "per_repo": {
          "langchain-ai/langchain": {
            "total_files": 12,
            "valid_files": 12,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/ci.md",
              ".claude/rules/architecture.md",
              ".claude/rules/security.md",
              ".claude/rules/partners/integration.md",
              ".claude/rules/agents/middleware.md"
            ]
          },
          "denoland/deno": {
            "total_files": 22,
            "valid_files": 22,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/do-not.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/domain.md",
              ".claude/rules/product.md",
              ".claude/rules/cargo.md",
              ".claude/rules/cli.md"
            ]
          },
          "prisma/prisma": {
            "total_files": 15,
            "valid_files": 15,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/do-not.md",
              ".claude/rules/workflow.md",
              ".claude/rules/ci.md",
              ".claude/rules/architecture.md",
              ".claude/rules/security.md",
              ".claude/rules/domain.md",
              ".claude/rules/product.md"
            ]
          },
          "vercel/next.js": {
            "total_files": 1,
            "valid_files": 1,
            "has_donot": false,
            "file_paths": [
              ".claude/CLAUDE.md"
            ]
          },
          "facebook/react": {
            "total_files": 19,
            "valid_files": 19,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/code-style-typescript.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/do-not.md",
              ".claude/rules/architecture.md",
              ".claude/rules/architecture/compiler.md",
              ".claude/rules/architecture/devtools.md",
              ".claude/rules/architecture/flight-server.md"
            ]
          },
          "anthropics/claude-code": {
            "total_files": 18,
            "valid_files": 18,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/do-not.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/security.md",
              ".claude/rules/domain.md",
              ".claude/rules/design.md",
              ".claude/rules/product.md"
            ]
          },
          "anthropics/claude-agent-sdk-python": {
            "total_files": 14,
            "valid_files": 14,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/do-not.md",
              ".claude/rules/testing.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/domain.md",
              ".claude/rules/design.md",
              ".claude/rules/product.md",
              ".claude/rules/ci.md"
            ]
          },
          "openclaw/openclaw": {
            "total_files": 22,
            "valid_files": 22,
            "has_donot": true,
            "file_paths": [
              ".claude/CLAUDE.md",
              ".claude/rules/code-style.md",
              ".claude/rules/testing.md",
              ".claude/rules/do-not.md",
              ".claude/rules/workflow.md",
              ".claude/rules/architecture.md",
              ".claude/rules/security.md",
              ".claude/rules/domain.md",
              ".claude/rules/ci.md",
              ".claude/rules/design.md"
            ]
          }
        }
      },
      "error": null,
      "duration_seconds": 2411.82
    },
    {
      "name": "Incremental Extraction",
      "score": 1.0,
      "details": {
        "successful_extractions": 8,
        "total_attempts": 8,
        "per_repo": {
          "langchain-ai/langchain": {
            "pr_number": 35211,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "denoland/deno": {
            "pr_number": 32161,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "prisma/prisma": {
            "pr_number": 29038,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "vercel/next.js": {
            "pr_number": 88959,
            "new_rules": 1,
            "new_proposals": 1,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "facebook/react": {
            "pr_number": 30522,
            "new_rules": 0,
            "new_proposals": 3,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "anthropics/claude-code": {
            "pr_number": 18198,
            "new_rules": 0,
            "new_proposals": 0,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "anthropics/claude-agent-sdk-python": {
            "pr_number": 91,
            "new_rules": 1,
            "new_proposals": 4,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          },
          "openclaw/openclaw": {
            "pr_number": 11539,
            "new_rules": 0,
            "new_proposals": 8,
            "auto_approved_count": 0,
            "confidence_check_passed": true
          }
        }
      },
      "error": null,
      "duration_seconds": 716.38
    },
    {
      "name": "Outcome Metrics Collection",
      "score": 1.0,
      "details": {
        "repos_with_valid_metrics": 8,
        "total_repos": 8,
        "per_repo": {
          "langchain-ai/langchain": {
            "metrics": {
              "total_prs": 22,
              "avg_review_rounds": 0.45,
              "ci_failure_rate": 0.114,
              "avg_time_to_merge_hours": 23.8
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "denoland/deno": {
            "metrics": {
              "total_prs": 42,
              "avg_review_rounds": 1.8,
              "ci_failure_rate": 0.009,
              "avg_time_to_merge_hours": 43.9
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "prisma/prisma": {
            "metrics": {
              "total_prs": 23,
              "avg_review_rounds": 2.17,
              "ci_failure_rate": 0.032,
              "avg_time_to_merge_hours": 19.2
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "vercel/next.js": {
            "metrics": {
              "total_prs": 8,
              "avg_review_rounds": 1.5,
              "ci_failure_rate": 0.075,
              "avg_time_to_merge_hours": 2.9
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "facebook/react": {
            "metrics": {
              "total_prs": 26,
              "avg_review_rounds": 1.58,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 13.3
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "anthropics/claude-code": {
            "metrics": {
              "total_prs": 5,
              "avg_review_rounds": 1.2,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 2.4
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "anthropics/claude-agent-sdk-python": {
            "metrics": {
              "total_prs": 4,
              "avg_review_rounds": 1.0,
              "ci_failure_rate": 0.0,
              "avg_time_to_merge_hours": 6.6
            },
            "fields_present": 4,
            "values_reasonable": true
          },
          "openclaw/openclaw": {
            "metrics": {
              "total_prs": 12,
              "avg_review_rounds": 0.58,
              "ci_failure_rate": 0.095,
              "avg_time_to_merge_hours": 48.2
            },
            "fields_present": 4,
            "values_reasonable": true
          }
        }
      },
      "error": null,
      "duration_seconds": 362.64
    },
    {
      "name": "Domain Knowledge Extraction",
      "score": 0.8083,
      "details": {
        "repos_with_domain_rules": 7,
        "total_domain_rules": 219,
        "total_repos": 8,
        "sub_evals": {
          "7a_content_quality": {
            "weight": 0.3,
            "score": 0.9229,
            "per_repo": {
              "langchain-ai/langchain": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "denoland/deno": {
                "rules_sampled": 10,
                "avg_specificity": 4.9,
                "avg_actionability": 4.3,
                "score": 0.92
              },
              "prisma/prisma": {
                "rules_sampled": 10,
                "avg_specificity": 4.7,
                "avg_actionability": 3.9,
                "score": 0.86
              },
              "vercel/next.js": {
                "rules_sampled": 10,
                "avg_specificity": 4.9,
                "avg_actionability": 4.6,
                "score": 0.95
              },
              "facebook/react": {
                "rules_sampled": 1,
                "avg_specificity": 5.0,
                "avg_actionability": 5.0,
                "score": 1.0
              },
              "anthropics/claude-code": {
                "rules_sampled": 10,
                "avg_specificity": 4.5,
                "avg_actionability": 4.2,
                "score": 0.87
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_sampled": 10,
                "avg_specificity": 5.0,
                "avg_actionability": 4.3,
                "score": 0.93
              },
              "openclaw/openclaw": {
                "rules_sampled": 10,
                "avg_specificity": 5.0,
                "avg_actionability": 4.3,
                "score": 0.93
              }
            }
          },
          "7b_domain_coverage": {
            "weight": 0.25,
            "score": 0.5143,
            "per_repo": {
              "langchain-ai/langchain": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "denoland/deno": {
                "rules_count": 45,
                "llm_failed": true,
                "score": 0.5
              },
              "prisma/prisma": {
                "rules_count": 29,
                "has_readme": true,
                "completeness": 6,
                "depth": 7,
                "score": 0.65
              },
              "vercel/next.js": {
                "rules_count": 17,
                "has_readme": true,
                "completeness": 5,
                "depth": 4,
                "score": 0.45
              },
              "facebook/react": {
                "rules_count": 1,
                "has_readme": true,
                "completeness": 2,
                "depth": 3,
                "score": 0.25
              },
              "anthropics/claude-code": {
                "rules_count": 44,
                "has_readme": true,
                "completeness": 2,
                "depth": 8,
                "score": 0.5
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_count": 48,
                "llm_failed": true,
                "score": 0.5
              },
              "openclaw/openclaw": {
                "rules_count": 35,
                "has_readme": true,
                "completeness": 7,
                "depth": 8,
                "score": 0.75
              }
            }
          },
          "7c_confidence_calibration": {
            "weight": 0.15,
            "score": 0.8,
            "per_repo": {
              "langchain-ai/langchain": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "denoland/deno": {
                "domain_avg_conf": 0.848,
                "code_avg_conf": 0.896,
                "conf_spread": 0.0391,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              },
              "prisma/prisma": {
                "domain_avg_conf": 0.876,
                "code_avg_conf": 0.88,
                "conf_spread": 0.0344,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              },
              "vercel/next.js": {
                "domain_avg_conf": 0.897,
                "code_avg_conf": 0.866,
                "conf_spread": 0.0121,
                "calibrated": false,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.2
              },
              "facebook/react": {
                "domain_avg_conf": 0.85,
                "code_avg_conf": 0.874,
                "conf_spread": 0.0,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              },
              "anthropics/claude-code": {
                "domain_avg_conf": 0.838,
                "code_avg_conf": 0.905,
                "conf_spread": 0.0391,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              },
              "anthropics/claude-agent-sdk-python": {
                "domain_avg_conf": 0.868,
                "code_avg_conf": 0.892,
                "conf_spread": 0.0263,
                "calibrated": true,
                "differentiated": false,
                "no_ceiling": true,
                "score": 0.7
              },
              "openclaw/openclaw": {
                "domain_avg_conf": 0.837,
                "code_avg_conf": 0.889,
                "conf_spread": 0.0408,
                "calibrated": true,
                "differentiated": true,
                "no_ceiling": true,
                "score": 1.0
              }
            }
          },
          "7d_category_accuracy": {
            "weight": 0.15,
            "score": 0.8857,
            "per_repo": {
              "langchain-ai/langchain": {
                "skipped": true,
                "reason": "no domain rules"
              },
              "denoland/deno": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              },
              "prisma/prisma": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              },
              "vercel/next.js": {
                "rules_sampled": 10,
                "matches": 8,
                "total_judged": 10,
                "accuracy": 0.8
              },
              "facebook/react": {
                "rules_sampled": 1,
                "matches": 1,
                "total_judged": 1,
                "accuracy": 1.0
              },
              "anthropics/claude-code": {
                "rules_sampled": 10,
                "matches": 9,
                "total_judged": 10,
                "accuracy": 0.9
              },
              "anthropics/claude-agent-sdk-python": {
                "rules_sampled": 10,
                "matches": 5,
                "total_judged": 10,
                "accuracy": 0.5
              },
              "openclaw/openclaw": {
                "rules_sampled": 10,
                "matches": 10,
                "total_judged": 10,
                "accuracy": 1.0
              }
            }
          },
          "7e_db_schema_selftest": {
            "weight": 0.15,
            "score": 1.0,
            "agent_output_length": 3934,
            "rules_extracted": 22,
            "facts_found": 5,
            "total_expected_facts": 5,
            "fact_results": [
              {
                "table": "knowledge_rules",
                "concept": "foreign key",
                "related": "repositories",
                "found": true
              },
              {
                "table": "outcome_metrics",
                "concept": "UNIQUE",
                "related": "repo_id",
                "found": true
              },
              {
                "table": "mined_sessions",
                "concept": "UNIQUE",
                "related": "path",
                "found": true
              },
              {
                "table": "proposals",
                "concept": "status",
                "related": "pending",
                "found": true
              },
              {
                "table": "created_at",
                "concept": "timestamp",
                "related": "datetime",
                "found": true
              }
            ],
            "temp_repo_id": 9
          }
        }
      },
      "error": null,
      "duration_seconds": 399.43
    },
    {
      "name": "Ground Truth Recall",
      "score": 0.4694,
      "details": {
        "repos_with_ground_truth": 7,
        "total_repos": 8,
        "avg_recall": 0.4694,
        "per_repo": {
          "langchain-ai/langchain": {
            "total_rules": 87,
            "contaminated": 0,
            "independent": 87,
            "total_guidelines": 26,
            "matched": 16.5,
            "recall": 0.6346,
            "unmatched_examples": [
              "PR descriptions must include AI disclaimer",
              "PR descriptions should describe the 'why', limit prose, highlight areas needing review",
              "CRITICAL: Preserve function signatures, argument positions, and names for public methods - no breaking changes",
              "Warn developer for any function signature changes",
              "Check if function/class is exported in __init__.py before changes"
            ],
            "matched_examples": [
              "Monorepo uses uv for dependency management (1.0)",
              "Run uv sync --all-groups or uv sync --group test before tests (1.0)",
              "Run make test for unit tests (1.0)",
              "Run make lint for linting (1.0)",
              "Run make format for formatting (1.0)"
            ],
            "score": 0.6346153846153846
          },
          "denoland/deno": {
            "total_rules": 126,
            "contaminated": 8,
            "independent": 118,
            "total_guidelines": 50,
            "matched": 19.5,
            "recall": 0.39,
            "unmatched_examples": [
              "NEVER add hacky workarounds to make failing Node.js compatibility tests pass \u2014 prefer marking them as ignored in tests/node_compat/config.jsonc",
              "Use the Rust toolchain version specified in rust-toolchain.toml (currently 1.92.0 with rustfmt and clippy components)",
              "CI workflow (.github/workflows/ci.yml) is generated by ./ci.generate.ts \u2014 NEVER edit ci.yml directly",
              "Benchmarks only run when the 'ci-bench' label is applied to a PR or on main branch commits",
              "Draft PRs skip CI builds by default unless they contain '[ci]' in the commit message or have the 'ci-draft' label"
            ],
            "matched_examples": [
              "Key Directories: cli/, runtime/, ext/, tests/specs/, tests/unit/, tests/testdata/ (1.0)",
              "cargo build to compile after making changes (1.0)",
              "cargo build --bin deno for faster iteration during development (1.0)",
              "./target/debug/deno eval for executing development build (1.0)",
              "./target/debug/deno run path/to/file.ts to run a local file (1.0)"
            ],
            "score": 0.39
          },
          "prisma/prisma": {
            "total_rules": 80,
            "contaminated": 0,
            "independent": 80,
            "total_guidelines": 24,
            "matched": 8.0,
            "recall": 0.3333,
            "unmatched_examples": [
              "Run `pnpm bench` to run all benchmarks",
              "Run `pnpm bench <pattern>` to run benchmarks matching pattern",
              "Benchmark locations: query-performance.bench.ts, compilation.bench.ts, interpreter.bench.ts, huge-schema/, lots-of-relations/",
              "CodSpeed tracks performance and alerts on >100% regression",
              "Docker services from docker/docker-compose.yml required for DB tests"
            ],
            "matched_examples": [
              "Node version ^20.19 || ^22.12 || >=24.0 required (1.0)",
              "pnpm >=10.15 <11 required (1.0)",
              "Use pnpm, never npm/yarn (1.0)",
              "Use pnpm workspaces (1.0)",
              "Run `pnpm build` from root (1.0)"
            ],
            "score": 0.3333333333333333
          },
          "vercel/next.js": {
            "total_rules": 154,
            "contaminated": 0,
            "independent": 154,
            "total_guidelines": 26,
            "matched": 14.5,
            "recall": 0.5577,
            "unmatched_examples": [
              "NEXT_SKIP_ISOLATE=1 - skip packing Next.js for each test (much faster)",
              "testonly - runs with --runInBand (no worker isolation overhead)",
              "Always rebuild after switching branches: git checkout <branch> && pnpm build",
              "Only use full pnpm --filter=next build for one-off builds (after branch switch, before CI push)",
              "When done with watch mode, kill the background watch process"
            ],
            "matched_examples": [
              "pnpm --filter=next build - Build the Next.js package (1.0)",
              "pnpm build - Build everything (1.0)",
              "pnpm test-dev-turbo test/path/to/test.test.ts - Run specific test file (1.0)",
              "pnpm test-dev-turbo -t \"pattern\" - Run tests matching pattern (0.5)",
              "pnpm test-dev-turbo - Development mode with Turbopack (1.0)"
            ],
            "score": 0.5576923076923077
          },
          "facebook/react": {
            "total_rules": 64,
            "contaminated": 0,
            "independent": 64,
            "total_guidelines": 2,
            "matched": 0.0,
            "recall": 0.0,
            "unmatched_examples": [
              "React is a JavaScript library for building user interfaces",
              "Monorepo structure: React files outside /compiler/, React Compiler in /compiler/ directory with separate instructions"
            ],
            "matched_examples": [],
            "score": 0.0
          },
          "anthropics/claude-code": {
            "skipped": true,
            "reason": "no CLAUDE.md or AGENTS.md found"
          },
          "anthropics/claude-agent-sdk-python": {
            "total_rules": 108,
            "contaminated": 2,
            "independent": 106,
            "total_guidelines": 11,
            "matched": 5.5,
            "recall": 0.5,
            "unmatched_examples": [
              "Codebase Structure: src/claude_agent_sdk/ - Main package",
              "Codebase Structure: client.py - ClaudeSDKClient for interactive sessions",
              "Codebase Structure: query.py - One-shot query function",
              "Codebase Structure: types.py - Type definitions",
              "Codebase Structure: _internal/ - Internal implementation details"
            ],
            "matched_examples": [
              "python -m ruff check src/ tests/ --fix (1.0) - matched by rule 24 (ruff check) and workflow patterns",
              "python -m ruff format src/ tests/ (1.0) - matched by rule 23 (ruff format --check)",
              "python -m mypy src/ (1.0) - matched exactly by rule 22",
              "python -m pytest tests/ (1.0) - matched by rule 25 (pytest tests/)",
              "python -m pytest tests/test_client.py (0.5) - partially matched by rule 25 (pytest tests/) and rule 19 (test_ prefix naming)"
            ],
            "score": 0.5
          },
          "openclaw/openclaw": {
            "total_rules": 102,
            "contaminated": 0,
            "independent": 102,
            "total_guidelines": 50,
            "matched": 43.5,
            "recall": 0.87,
            "unmatched_examples": [
              "Installers served from https://openclaw.ai/*: live in the sibling repo ../openclaw.ai",
              "When adding channels/extensions/apps/docs, update .github/labeler.yml and create matching GitHub labels",
              "Docs i18n (zh-CN): docs/zh-CN/** is generated; do not edit unless the user explicitly asks. Pipeline: update English \u2192 adjust glossary \u2192 run scripts/docs-i18n",
              "exe.dev VM ops: Access via ssh exe.dev then ssh vm-name; restart with pkill -9 -f openclaw-gateway || true; nohup openclaw gateway run --bind loopback --port 18789 --force",
              "Mac packaging (dev): scripts/package-mac-app.sh defaults to current arch. Release checklist: docs/platforms/mac/release.md"
            ],
            "matched_examples": [
              "Run pnpm check before commits (1.0)",
              "Node.js version must be >=22.12.0 / Node 22+ (1.0)",
              "Use oxlint for linting TypeScript/JavaScript \u2014 NEVER use ESLint. typescript/no-explicit-any rule set to error (1.0)",
              "Use oxfmt for code formatting \u2014 NEVER use Prettier. experimentalSortImports enabled (1.0)",
              "Use pnpm as the package manager (version 10.23.0) \u2014 NEVER use npm or yarn. pnpm-lock.yaml lockfile (1.0)"
            ],
            "score": 0.87
          }
        }
      },
      "error": null,
      "duration_seconds": 142.7
    }
  ]
}